"use strict";(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsRepoMigrations = factory()}(typeof self !== 'undefined' ? self : this, function () {
var IpfsRepoMigrations=(()=>{var ec=Object.create;var ar=Object.defineProperty;var tc=Object.getOwnPropertyDescriptor;var rc=Object.getOwnPropertyNames;var nc=Object.getPrototypeOf,oc=Object.prototype.hasOwnProperty;var S=(r,e)=>()=>(r&&(e=r(r=0)),e);var D=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),$=(r,e)=>{for(var t in e)ar(r,t,{get:e[t],enumerable:!0})},Oo=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of rc(e))!oc.call(r,o)&&o!==t&&ar(r,o,{get:()=>e[o],enumerable:!(n=tc(e,o))||n.enumerable});return r};var z=(r,e,t)=>(t=r!=null?ec(nc(r)):{},Oo(e||!r||!r.__esModule?ar(t,"default",{value:r,enumerable:!0}):t,r)),H=r=>Oo(ar({},"__esModule",{value:!0}),r);function ko(r,e,t){e=e||[],t=t||0;for(var n=t;r>=uc;)e[t++]=r&255|To,r/=128;for(;r&ac;)e[t++]=r&255|To,r>>>=7;return e[t]=r|0,ko.bytes=t-n+1,e}function tn(r,n){var t=0,n=n||0,o=0,i=n,s,a=r.length;do{if(i>=a)throw tn.bytes=0,new RangeError("Could not decode varint");s=r[i++],t+=o<28?(s&_o)<<o:(s&_o)*Math.pow(2,o),o+=7}while(s>=fc);return tn.bytes=i-n,t}var ic,To,sc,ac,uc,cc,fc,_o,lc,dc,pc,hc,yc,gc,mc,wc,bc,Dc,Ec,vc,Nt,No=S(()=>{ic=ko,To=128,sc=127,ac=~sc,uc=Math.pow(2,31);cc=tn,fc=128,_o=127;lc=Math.pow(2,7),dc=Math.pow(2,14),pc=Math.pow(2,21),hc=Math.pow(2,28),yc=Math.pow(2,35),gc=Math.pow(2,42),mc=Math.pow(2,49),wc=Math.pow(2,56),bc=Math.pow(2,63),Dc=function(r){return r<lc?1:r<dc?2:r<pc?3:r<hc?4:r<yc?5:r<gc?6:r<mc?7:r<wc?8:r<bc?9:10},Ec={encode:ic,decode:cc,encodingLength:Dc},vc=Ec,Nt=vc});var Ft,ut,ct,cr=S(()=>{No();Ft=r=>[Nt.decode(r),Nt.decode.bytes],ut=(r,e,t=0)=>(Nt.encode(r,e,t),e),ct=r=>Nt.encodingLength(r)});var Md,Fo,Se,Io,$o,$e=S(()=>{Md=new Uint8Array(0),Fo=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Se=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Io=r=>new TextEncoder().encode(r),$o=r=>new TextDecoder().decode(r)});var Be={};$(Be,{Digest:()=>We,create:()=>Re,decode:()=>Ye,equals:()=>rn});var Re,Ye,rn,We,Pe=S(()=>{$e();cr();Re=(r,e)=>{let t=e.byteLength,n=ct(r),o=n+ct(t),i=new Uint8Array(o+t);return ut(r,i,0),ut(t,i,n),i.set(e,o),new We(r,t,e,i)},Ye=r=>{let e=Se(r),[t,n]=Ft(e),[o,i]=Ft(e.subarray(n)),s=e.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new We(t,o,s,e)},rn=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&Fo(r.bytes,e.bytes),We=class{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}}});function Cc(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var i=r.charAt(o),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=o}var a=r.length,u=r.charAt(0),f=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var C=0,_=0,F=0,K=m.length;F!==K&&m[F]===0;)F++,C++;for(var ne=(K-F)*c+1>>>0,q=new Uint8Array(ne);F!==K;){for(var fe=m[F],oe=0,Y=ne-1;(fe!==0||oe<_)&&Y!==-1;Y--,oe++)fe+=256*q[Y]>>>0,q[Y]=fe%a>>>0,fe=fe/a>>>0;if(fe!==0)throw new Error("Non-zero carry");_=oe,F++}for(var ie=ne-_;ie!==ne&&q[ie]===0;)ie++;for(var at=u.repeat(C);ie<ne;++ie)at+=r.charAt(q[ie]);return at}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var C=0;if(m[C]!==" "){for(var _=0,F=0;m[C]===u;)_++,C++;for(var K=(m.length-C)*f+1>>>0,ne=new Uint8Array(K);m[C];){var q=t[m.charCodeAt(C)];if(q===255)return;for(var fe=0,oe=K-1;(q!==0||fe<F)&&oe!==-1;oe--,fe++)q+=a*ne[oe]>>>0,ne[oe]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");F=fe,C++}if(m[C]!==" "){for(var Y=K-F;Y!==K&&ne[Y]===0;)Y++;for(var ie=new Uint8Array(_+(K-Y)),at=_;Y!==K;)ie[at++]=ne[Y++];return ie}}}function b(m){var C=h(m);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:b}}var xc,Ac,Po,Uo=S(()=>{xc=Cc,Ac=xc,Po=Ac});var nn,on,sn,jo,an,ft,Ue,Sc,Bc,k,le=S(()=>{Uo();$e();nn=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},on=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jo(this,e)}},sn=class{constructor(e){this.decoders=e}or(e){return jo(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},jo=(r,e)=>new sn({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),an=class{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new nn(e,t,n),this.decoder=new on(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},ft=({name:r,prefix:e,encode:t,decode:n})=>new an(r,e,t,n),Ue=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:o}=Po(t,e);return ft({prefix:r,name:e,encode:n,decode:i=>Se(o(i))})},Sc=(r,e,t,n)=>{let o={};for(let c=0;c<e.length;++c)o[e[c]]=c;let i=r.length;for(;r[i-1]==="=";)--i;let s=new Uint8Array(i*t/8|0),a=0,u=0,f=0;for(let c=0;c<i;++c){let d=o[r[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<t|d,a+=t,a>=8&&(a-=8,s[f++]=255&u>>a)}if(a>=t||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},Bc=(r,e,t)=>{let n=e[e.length-1]==="=",o=(1<<t)-1,i="",s=0,a=0;for(let u=0;u<r.length;++u)for(a=a<<8|r[u],s+=8;s>t;)s-=t,i+=e[o&a>>s];if(s&&(i+=e[o&a<<t-s]),n)for(;i.length*t&7;)i+="=";return i},k=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>ft({prefix:e,name:r,encode(o){return Bc(o,n,t)},decode(o){return Sc(o,n,t,r)}})});var It={};$(It,{base58btc:()=>De,base58flickr:()=>Oc});var De,Oc,$t=S(()=>{le();De=Ue({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Oc=Ue({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var fr={};$(fr,{base32:()=>J,base32hex:()=>Nc,base32hexpad:()=>Ic,base32hexpadupper:()=>$c,base32hexupper:()=>Fc,base32pad:()=>_c,base32padupper:()=>kc,base32upper:()=>Tc,base32z:()=>Rc});var J,Tc,_c,kc,Nc,Fc,Ic,$c,Rc,Xe=S(()=>{le();J=k({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Tc=k({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_c=k({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kc=k({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Nc=k({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Fc=k({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ic=k({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$c=k({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Rc=k({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var un={};$(un,{CID:()=>E});var E,Pc,Uc,jc,Rt,Lc,Lo,qo,lr,dr,qc,Mc,zc,Ee=S(()=>{cr();Pe();$t();Xe();$e();E=class{constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:dr,byteLength:dr,code:lr,version:lr,multihash:lr,bytes:lr,_baseCache:dr,asCID:dr})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Rt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Lc)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return E.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Re(e,t);return E.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&rn(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:o}=this;switch(n){case 0:return Uc(t,o,e||De.encoder);default:return jc(t,o,e||J.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Mc(/^0\.0/,zc),!!(e&&(e[qo]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof E)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:o,bytes:i}=e;return new E(t,n,o,i||Lo(t,n,o.bytes))}else if(e!=null&&e[qo]===!0){let{version:t,multihash:n,code:o}=e,i=Ye(n);return E.create(t,o,i)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Rt)throw new Error(`Version 0 CID must use dag-pb (code: ${Rt}) block encoding`);return new E(e,t,n,n.bytes)}case 1:{let o=Lo(e,t,n.bytes);return new E(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return E.create(0,Rt,e)}static createV1(e,t){return E.create(1,e,t)}static decode(e){let[t,n]=E.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=E.inspectBytes(e),n=t.size-t.multihashSize,o=Se(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");let i=o.subarray(t.multihashSize-t.digestSize),s=new We(t.multihashCode,t.digestSize,i,o);return[t.version===0?E.createV0(s):E.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[d,h]=Ft(e.subarray(t));return t+=h,d},o=n(),i=Rt;if(o===18?(o=0,t=0):o===1&&(i=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=t,a=n(),u=n(),f=t+u,c=f-s;return{version:o,codec:i,multihashCode:a,digestSize:u,multihashSize:c,size:f}}static parse(e,t){let[n,o]=Pc(e,t),i=E.decode(o);return i._baseCache.set(n,e),i}},Pc=(r,e)=>{switch(r[0]){case"Q":{let t=e||De;return[De.prefix,t.decode(`${De.prefix}${r}`)]}case De.prefix:{let t=e||De;return[De.prefix,t.decode(r)]}case J.prefix:{let t=e||J;return[J.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},Uc=(r,e,t)=>{let{prefix:n}=t;if(n!==De.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let o=e.get(n);if(o==null){let i=t.encode(r).slice(1);return e.set(n,i),i}else return o},jc=(r,e,t)=>{let{prefix:n}=t,o=e.get(n);if(o==null){let i=t.encode(r);return e.set(n,i),i}else return o},Rt=112,Lc=18,Lo=(r,e,t)=>{let n=ct(r),o=n+ct(e),i=new Uint8Array(o+t.byteLength);return ut(r,i,0),ut(e,i,n),i.set(t,o),i},qo=Symbol.for("@ipld/js-cid/CID"),lr={writable:!1,configurable:!1,enumerable:!0},dr={writable:!1,enumerable:!1,configurable:!1},qc="0.0.0-dev",Mc=(r,e)=>{if(r.test(qc))console.warn(e);else throw new Error(e)},zc=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var cn={};$(cn,{identity:()=>Vc});var Vc,zo=S(()=>{le();$e();Vc=ft({prefix:"\0",name:"identity",encode:r=>$o(r),decode:r=>Io(r)})});var fn={};$(fn,{base2:()=>Kc});var Kc,Vo=S(()=>{le();Kc=k({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var ln={};$(ln,{base8:()=>Hc});var Hc,Ko=S(()=>{le();Hc=k({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var dn={};$(dn,{base10:()=>Jc});var Jc,Ho=S(()=>{le();Jc=Ue({prefix:"9",name:"base10",alphabet:"0123456789"})});var pn={};$(pn,{base16:()=>Gc,base16upper:()=>Wc});var Gc,Wc,Jo=S(()=>{le();Gc=k({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wc=k({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var hn={};$(hn,{base36:()=>Yc,base36upper:()=>Xc});var Yc,Xc,Go=S(()=>{le();Yc=Ue({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xc=Ue({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var yn={};$(yn,{base64:()=>Zc,base64pad:()=>Qc,base64url:()=>ef,base64urlpad:()=>tf});var Zc,Qc,ef,tf,Wo=S(()=>{le();Zc=k({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qc=k({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ef=k({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tf=k({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var gn={};$(gn,{base256emoji:()=>af});function of(r){return r.reduce((e,t)=>(e+=rf[t],e),"")}function sf(r){let e=[];for(let t of r){let n=nf[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Yo,rf,nf,af,Xo=S(()=>{le();Yo=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),rf=Yo.reduce((r,e,t)=>(r[t]=e,r),[]),nf=Yo.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);af=ft({prefix:"\u{1F680}",name:"base256emoji",encode:of,decode:sf})});var wn,mn,bn=S(()=>{Pe();wn=({name:r,code:e,encode:t})=>new mn(r,e,t),mn=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Re(this.code,t):t.then(n=>Re(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var Dn={};$(Dn,{sha256:()=>lt,sha512:()=>uf});var Qo,lt,uf,pr=S(()=>{bn();Qo=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),lt=wn({name:"sha2-256",code:18,encode:Qo("SHA-256")}),uf=wn({name:"sha2-512",code:19,encode:Qo("SHA-512")})});var En={};$(En,{identity:()=>lf});var ei,cf,ti,ff,lf,ri=S(()=>{$e();Pe();ei=0,cf="identity",ti=Se,ff=r=>Re(ei,ti(r)),lf={code:ei,name:cf,encode:ti,digest:ff}});var ni,vn=S(()=>{$e();ni=85});var yp,gp,ii=S(()=>{yp=new TextEncoder,gp=new TextDecoder});var si=S(()=>{Ee();cr();$e();bn();Pe()});var Cn,Dp,ai=S(()=>{zo();Vo();Ko();Ho();Jo();Xe();Go();$t();Wo();Xo();pr();ri();vn();ii();si();Cn={...cn,...fn,...ln,...dn,...pn,...fr,...hn,...It,...yn,...gn},Dp={...Dn,...En}});function hr(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}var xn=S(()=>{});function ci(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var ui,An,pf,yr,Sn=S(()=>{ai();xn();ui=ci("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),An=ci("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=hr(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),pf={utf8:ui,"utf-8":ui,hex:Cn.base16,latin1:An,ascii:An,binary:An,...Cn},yr=pf});var Pt={};$(Pt,{toString:()=>Oe});function Oe(r,e="utf8"){let t=yr[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Te=S(()=>{Sn()});var fi={};$(fi,{fromString:()=>_e});function _e(r,e="utf8"){let t=yr[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var dt=S(()=>{Sn()});var pi=D((Np,di)=>{var pt=1e3,ht=pt*60,yt=ht*60,Ze=yt*24,mf=Ze*7,wf=Ze*365.25;di.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return bf(r);if(t==="number"&&isFinite(r))return e.long?Ef(r):Df(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function bf(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*wf;case"weeks":case"week":case"w":return t*mf;case"days":case"day":case"d":return t*Ze;case"hours":case"hour":case"hrs":case"hr":case"h":return t*yt;case"minutes":case"minute":case"mins":case"min":case"m":return t*ht;case"seconds":case"second":case"secs":case"sec":case"s":return t*pt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Df(r){var e=Math.abs(r);return e>=Ze?Math.round(r/Ze)+"d":e>=yt?Math.round(r/yt)+"h":e>=ht?Math.round(r/ht)+"m":e>=pt?Math.round(r/pt)+"s":r+"ms"}function Ef(r){var e=Math.abs(r);return e>=Ze?mr(r,e,Ze,"day"):e>=yt?mr(r,e,yt,"hour"):e>=ht?mr(r,e,ht,"minute"):e>=pt?mr(r,e,pt,"second"):r+" ms"}function mr(r,e,t,n){var o=e>=t*1.5;return Math.round(r/t)+" "+n+(o?"s":"")}});var yi=D((Fp,hi)=>{function vf(r){t.debug=t,t.default=t,t.coerce=u,t.disable=i,t.enable=o,t.enabled=s,t.humanize=pi(),t.destroy=f,Object.keys(r).forEach(c=>{t[c]=r[c]}),t.names=[],t.skips=[],t.formatters={};function e(c){let d=0;for(let h=0;h<c.length;h++)d=(d<<5)-d+c.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(c){let d,h=null,b,m;function C(..._){if(!C.enabled)return;let F=C,K=Number(new Date),ne=K-(d||K);F.diff=ne,F.prev=d,F.curr=K,d=K,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let q=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(oe,Y)=>{if(oe==="%%")return"%";q++;let ie=t.formatters[Y];if(typeof ie=="function"){let at=_[q];oe=ie.call(F,at),_.splice(q,1),q--}return oe}),t.formatArgs.call(F,_),(F.log||t.log).apply(F,_)}return C.namespace=c,C.useColors=t.useColors(),C.color=t.selectColor(c),C.extend=n,C.destroy=t.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(b!==t.namespaces&&(b=t.namespaces,m=t.enabled(c)),m),set:_=>{h=_}}),typeof t.init=="function"&&t.init(C),C}function n(c,d){let h=t(this.namespace+(typeof d>"u"?":":d)+c);return h.log=this.log,h}function o(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let d,h=(typeof c=="string"?c:"").split(/[\s,]+/),b=h.length;for(d=0;d<b;d++)!h[d]||(c=h[d].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),c}function s(c){if(c[c.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(c))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}hi.exports=vf});var br=D((X,wr)=>{X.formatArgs=xf;X.save=Af;X.load=Sf;X.useColors=Cf;X.storage=Bf();X.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();X.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Cf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function xf(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+wr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),r.splice(n,0,e)}X.log=console.debug||console.log||(()=>{});function Af(r){try{r?X.storage.setItem("debug",r):X.storage.removeItem("debug")}catch{}}function Sf(){let r;try{r=X.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Bf(){try{return localStorage}catch{}}wr.exports=yi()(X);var{formatters:Of}=wr.exports;Of.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Bn=D((Ip,gi)=>{"use strict";var Tf=async r=>{let e=0;for await(let t of r)e++;return e};gi.exports=Tf});var Rs=D((Jh,$s)=>{"use strict";$s.exports=Dl;function Dl(r,e){for(var t=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)t[n++]=arguments[o++];return new Promise(function(a,u){t[n]=function(c){if(i)if(i=!1,c)u(c);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];a.apply(null,d)}};try{r.apply(e||null,t)}catch(f){i&&(i=!1,u(f))}})}});var Ls=D(js=>{"use strict";var Fr=js;Fr.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Ct=new Array(64),Us=new Array(123);for(he=0;he<64;)Us[Ct[he]=he<26?he+65:he<52?he+71:he<62?he-4:he-59|43]=he++;var he;Fr.encode=function(e,t,n){for(var o=null,i=[],s=0,a=0,u;t<n;){var f=e[t++];switch(a){case 0:i[s++]=Ct[f>>2],u=(f&3)<<4,a=1;break;case 1:i[s++]=Ct[u|f>>4],u=(f&15)<<2,a=2;break;case 2:i[s++]=Ct[u|f>>6],i[s++]=Ct[f&63],a=0;break}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0)}return a&&(i[s++]=Ct[u],i[s++]=61,a===1&&(i[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))};var Ps="invalid encoding";Fr.decode=function(e,t,n){for(var o=n,i=0,s,a=0;a<e.length;){var u=e.charCodeAt(a++);if(u===61&&i>1)break;if((u=Us[u])===void 0)throw Error(Ps);switch(i){case 0:s=u,i=1;break;case 1:t[n++]=s<<2|(u&48)>>4,s=u,i=2;break;case 2:t[n++]=(s&15)<<4|(u&60)>>2,s=u,i=3;break;case 3:t[n++]=(s&3)<<6|u,i=0;break}}if(i===1)throw Error(Ps);return n-o};Fr.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Ms=D((Wh,qs)=>{"use strict";qs.exports=Ir;function Ir(){this._listeners={}}Ir.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Ir.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===t?n.splice(o,1):++o;return this};Ir.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,n)}return this}});var Ws=D((Yh,Gs)=>{"use strict";Gs.exports=zs(zs);function zs(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function o(u,f,c){e[0]=u,f[c]=t[0],f[c+1]=t[1],f[c+2]=t[2],f[c+3]=t[3]}function i(u,f,c){e[0]=u,f[c]=t[3],f[c+1]=t[2],f[c+2]=t[1],f[c+3]=t[0]}r.writeFloatLE=n?o:i,r.writeFloatBE=n?i:o;function s(u,f){return t[0]=u[f],t[1]=u[f+1],t[2]=u[f+2],t[3]=u[f+3],e[0]}function a(u,f){return t[3]=u[f],t[2]=u[f+1],t[1]=u[f+2],t[0]=u[f+3],e[0]}r.readFloatLE=n?s:a,r.readFloatBE=n?a:s}():function(){function e(n,o,i,s){var a=o<0?1:0;if(a&&(o=-o),o===0)n(1/o>0?0:2147483648,i,s);else if(isNaN(o))n(2143289344,i,s);else if(o>34028234663852886e22)n((a<<31|2139095040)>>>0,i,s);else if(o<11754943508222875e-54)n((a<<31|Math.round(o/1401298464324817e-60))>>>0,i,s);else{var u=Math.floor(Math.log(o)/Math.LN2),f=Math.round(o*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|f)>>>0,i,s)}}r.writeFloatLE=e.bind(null,Vs),r.writeFloatBE=e.bind(null,Ks);function t(n,o,i){var s=n(o,i),a=(s>>31)*2+1,u=s>>>23&255,f=s&8388607;return u===255?f?NaN:a*(1/0):u===0?a*1401298464324817e-60*f:a*Math.pow(2,u-150)*(f+8388608)}r.readFloatLE=t.bind(null,Hs),r.readFloatBE=t.bind(null,Js)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function o(u,f,c){e[0]=u,f[c]=t[0],f[c+1]=t[1],f[c+2]=t[2],f[c+3]=t[3],f[c+4]=t[4],f[c+5]=t[5],f[c+6]=t[6],f[c+7]=t[7]}function i(u,f,c){e[0]=u,f[c]=t[7],f[c+1]=t[6],f[c+2]=t[5],f[c+3]=t[4],f[c+4]=t[3],f[c+5]=t[2],f[c+6]=t[1],f[c+7]=t[0]}r.writeDoubleLE=n?o:i,r.writeDoubleBE=n?i:o;function s(u,f){return t[0]=u[f],t[1]=u[f+1],t[2]=u[f+2],t[3]=u[f+3],t[4]=u[f+4],t[5]=u[f+5],t[6]=u[f+6],t[7]=u[f+7],e[0]}function a(u,f){return t[7]=u[f],t[6]=u[f+1],t[5]=u[f+2],t[4]=u[f+3],t[3]=u[f+4],t[2]=u[f+5],t[1]=u[f+6],t[0]=u[f+7],e[0]}r.readDoubleLE=n?s:a,r.readDoubleBE=n?a:s}():function(){function e(n,o,i,s,a,u){var f=s<0?1:0;if(f&&(s=-s),s===0)n(0,a,u+o),n(1/s>0?0:2147483648,a,u+i);else if(isNaN(s))n(0,a,u+o),n(2146959360,a,u+i);else if(s>17976931348623157e292)n(0,a,u+o),n((f<<31|2146435072)>>>0,a,u+i);else{var c;if(s<22250738585072014e-324)c=s/5e-324,n(c>>>0,a,u+o),n((f<<31|c/4294967296)>>>0,a,u+i);else{var d=Math.floor(Math.log(s)/Math.LN2);d===1024&&(d=1023),c=s*Math.pow(2,-d),n(c*4503599627370496>>>0,a,u+o),n((f<<31|d+1023<<20|c*1048576&1048575)>>>0,a,u+i)}}}r.writeDoubleLE=e.bind(null,Vs,0,4),r.writeDoubleBE=e.bind(null,Ks,4,0);function t(n,o,i,s,a){var u=n(s,a+o),f=n(s,a+i),c=(f>>31)*2+1,d=f>>>20&2047,h=4294967296*(f&1048575)+u;return d===2047?h?NaN:c*(1/0):d===0?c*5e-324*h:c*Math.pow(2,d-1075)*(h+4503599627370496)}r.readDoubleLE=t.bind(null,Hs,0,4),r.readDoubleBE=t.bind(null,Js,4,0)}(),r}function Vs(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function Ks(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function Hs(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function Js(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var Ys=D((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var Zs=D(Xs=>{"use strict";var Un=Xs;Un.length=function(e){for(var t=0,n=0,o=0;o<e.length;++o)n=e.charCodeAt(o),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(o+1)&64512)===56320?(++o,t+=4):t+=3;return t};Un.read=function(e,t,n){var o=n-t;if(o<1)return"";for(var i=null,s=[],a=0,u;t<n;)u=e[t++],u<128?s[a++]=u:u>191&&u<224?s[a++]=(u&31)<<6|e[t++]&63:u>239&&u<365?(u=((u&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[a++]=55296+(u>>10),s[a++]=56320+(u&1023)):s[a++]=(u&15)<<12|(e[t++]&63)<<6|e[t++]&63,a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};Un.write=function(e,t,n){for(var o=n,i,s,a=0;a<e.length;++a)i=e.charCodeAt(a),i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&((s=e.charCodeAt(a+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++a,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128);return n-o}});var ea=D((Zh,Qs)=>{"use strict";Qs.exports=El;function El(r,e,t){var n=t||8192,o=n>>>1,i=null,s=n;return function(u){if(u<1||u>o)return r(u);s+u>n&&(i=r(n),s=0);var f=e.call(i,s,s+=u);return s&7&&(s=(s|7)+1),f}}});var ra=D((Qh,ta)=>{"use strict";ta.exports=j;var Jt=Me();function j(r,e){this.lo=r>>>0,this.hi=e>>>0}var et=j.zero=new j(0,0);et.toNumber=function(){return 0};et.zzEncode=et.zzDecode=function(){return this};et.length=function(){return 1};var vl=j.zeroHash="\0\0\0\0\0\0\0\0";j.fromNumber=function(e){if(e===0)return et;var t=e<0;t&&(e=-e);var n=e>>>0,o=(e-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new j(n,o)};j.from=function(e){if(typeof e=="number")return j.fromNumber(e);if(Jt.isString(e))if(Jt.Long)e=Jt.Long.fromString(e);else return j.fromNumber(parseInt(e,10));return e.low||e.high?new j(e.low>>>0,e.high>>>0):et};j.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};j.prototype.toLong=function(e){return Jt.Long?new Jt.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var qe=String.prototype.charCodeAt;j.fromHash=function(e){return e===vl?et:new j((qe.call(e,0)|qe.call(e,1)<<8|qe.call(e,2)<<16|qe.call(e,3)<<24)>>>0,(qe.call(e,4)|qe.call(e,5)<<8|qe.call(e,6)<<16|qe.call(e,7)<<24)>>>0)};j.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};j.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};j.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};j.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var Me=D(jn=>{"use strict";var g=jn;g.asPromise=Rs();g.base64=Ls();g.EventEmitter=Ms();g.float=Ws();g.inquire=Ys();g.utf8=Zs();g.pool=ea();g.LongBits=ra();g.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);g.global=g.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||jn;g.emptyArray=Object.freeze?Object.freeze([]):[];g.emptyObject=Object.freeze?Object.freeze({}):{};g.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};g.isString=function(e){return typeof e=="string"||e instanceof String};g.isObject=function(e){return e&&typeof e=="object"};g.isset=g.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};g.Buffer=function(){try{var r=g.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();g._Buffer_from=null;g._Buffer_allocUnsafe=null;g.newBuffer=function(e){return typeof e=="number"?g.Buffer?g._Buffer_allocUnsafe(e):new g.Array(e):g.Buffer?g._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};g.Array=typeof Uint8Array<"u"?Uint8Array:Array;g.Long=g.global.dcodeIO&&g.global.dcodeIO.Long||g.global.Long||g.inquire("long");g.key2Re=/^true|false|0|1$/;g.key32Re=/^-?(?:0|[1-9][0-9]*)$/;g.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;g.longToHash=function(e){return e?g.LongBits.from(e).toHash():g.LongBits.zeroHash};g.longFromHash=function(e,t){var n=g.LongBits.fromHash(e);return g.Long?g.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function na(r,e,t){for(var n=Object.keys(e),o=0;o<n.length;++o)(r[n[o]]===void 0||!t)&&(r[n[o]]=e[n[o]]);return r}g.merge=na;g.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function oa(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&na(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}g.newError=oa;g.ProtocolError=oa("ProtocolError");g.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var o=Object.keys(this),i=o.length-1;i>-1;--i)if(t[o[i]]===1&&this[o[i]]!==void 0&&this[o[i]]!==null)return o[i]}};g.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};g.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};g._configure=function(){var r=g.Buffer;if(!r){g._Buffer_from=g._Buffer_allocUnsafe=null;return}g._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},g._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var Hn=D((ty,ua)=>{"use strict";ua.exports=v;var ue=Me(),Ln,$r=ue.LongBits,ia=ue.base64,sa=ue.utf8;function Gt(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function Mn(){}function Cl(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function v(){this.len=0,this.head=new Gt(Mn,0,0),this.tail=this.head,this.states=null}var aa=function(){return ue.Buffer?function(){return(v.create=function(){return new Ln})()}:function(){return new v}};v.create=aa();v.alloc=function(e){return new ue.Array(e)};ue.Array!==Array&&(v.alloc=ue.pool(v.alloc,ue.Array.prototype.subarray));v.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Gt(e,t,n),this.len+=t,this};function zn(r,e,t){e[t]=r&255}function xl(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function Vn(r,e){this.len=r,this.next=void 0,this.val=e}Vn.prototype=Object.create(Gt.prototype);Vn.prototype.fn=xl;v.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Vn((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};v.prototype.int32=function(e){return e<0?this._push(Kn,10,$r.fromNumber(e)):this.uint32(e)};v.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Kn(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}v.prototype.uint64=function(e){var t=$r.from(e);return this._push(Kn,t.length(),t)};v.prototype.int64=v.prototype.uint64;v.prototype.sint64=function(e){var t=$r.from(e).zzEncode();return this._push(Kn,t.length(),t)};v.prototype.bool=function(e){return this._push(zn,1,e?1:0)};function qn(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}v.prototype.fixed32=function(e){return this._push(qn,4,e>>>0)};v.prototype.sfixed32=v.prototype.fixed32;v.prototype.fixed64=function(e){var t=$r.from(e);return this._push(qn,4,t.lo)._push(qn,4,t.hi)};v.prototype.sfixed64=v.prototype.fixed64;v.prototype.float=function(e){return this._push(ue.float.writeFloatLE,4,e)};v.prototype.double=function(e){return this._push(ue.float.writeDoubleLE,8,e)};var Al=ue.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var o=0;o<e.length;++o)t[n+o]=e[o]};v.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(zn,1,0);if(ue.isString(e)){var n=v.alloc(t=ia.length(e));ia.decode(e,n,0),e=n}return this.uint32(t)._push(Al,t,e)};v.prototype.string=function(e){var t=sa.length(e);return t?this.uint32(t)._push(sa.write,t,e):this._push(zn,1,0)};v.prototype.fork=function(){return this.states=new Cl(this),this.head=this.tail=new Gt(Mn,0,0),this.len=0,this};v.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Gt(Mn,0,0),this.len=0),this};v.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};v.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};v._configure=function(r){Ln=r,v.create=aa(),Ln._configure()}});var la=D((ry,fa)=>{"use strict";fa.exports=Ce;var ca=Hn();(Ce.prototype=Object.create(ca.prototype)).constructor=Ce;var ze=Me();function Ce(){ca.call(this)}Ce._configure=function(){Ce.alloc=ze._Buffer_allocUnsafe,Ce.writeBytesBuffer=ze.Buffer&&ze.Buffer.prototype instanceof Uint8Array&&ze.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var o=0;o<e.length;)t[n++]=e[o++]}};Ce.prototype.bytes=function(e){ze.isString(e)&&(e=ze._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Ce.writeBytesBuffer,t,e),this};function Sl(r,e,t){r.length<40?ze.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}Ce.prototype.string=function(e){var t=ze.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Sl,t,e),this};Ce._configure()});var Wn=D((ny,ga)=>{"use strict";ga.exports=I;var xe=Me(),Gn,ha=xe.LongBits,Bl=xe.utf8;function ye(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function I(r){this.buf=r,this.pos=0,this.len=r.length}var da=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new I(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new I(e);throw Error("illegal buffer")},ya=function(){return xe.Buffer?function(t){return(I.create=function(o){return xe.Buffer.isBuffer(o)?new Gn(o):da(o)})(t)}:da};I.create=ya();I.prototype._slice=xe.Array.prototype.subarray||xe.Array.prototype.slice;I.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ye(this,10);return e}}();I.prototype.int32=function(){return this.uint32()|0};I.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Jn(){var r=new ha(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ye(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw ye(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}I.prototype.bool=function(){return this.uint32()!==0};function Rr(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}I.prototype.fixed32=function(){if(this.pos+4>this.len)throw ye(this,4);return Rr(this.buf,this.pos+=4)};I.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ye(this,4);return Rr(this.buf,this.pos+=4)|0};function pa(){if(this.pos+8>this.len)throw ye(this,8);return new ha(Rr(this.buf,this.pos+=4),Rr(this.buf,this.pos+=4))}I.prototype.float=function(){if(this.pos+4>this.len)throw ye(this,4);var e=xe.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};I.prototype.double=function(){if(this.pos+8>this.len)throw ye(this,4);var e=xe.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};I.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw ye(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};I.prototype.string=function(){var e=this.bytes();return Bl.read(e,0,e.length)};I.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ye(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ye(this);while(this.buf[this.pos++]&128);return this};I.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};I._configure=function(r){Gn=r,I.create=ya(),Gn._configure();var e=xe.Long?"toLong":"toNumber";xe.merge(I.prototype,{int64:function(){return Jn.call(this)[e](!1)},uint64:function(){return Jn.call(this)[e](!0)},sint64:function(){return Jn.call(this).zzDecode()[e](!1)},fixed64:function(){return pa.call(this)[e](!0)},sfixed64:function(){return pa.call(this)[e](!1)}})}});var Da=D((oy,ba)=>{"use strict";ba.exports=tt;var wa=Wn();(tt.prototype=Object.create(wa.prototype)).constructor=tt;var ma=Me();function tt(r){wa.call(this,r)}tt._configure=function(){ma.Buffer&&(tt.prototype._slice=ma.Buffer.prototype.slice)};tt.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};tt._configure()});var va=D((iy,Ea)=>{"use strict";Ea.exports=Wt;var Yn=Me();(Wt.prototype=Object.create(Yn.EventEmitter.prototype)).constructor=Wt;function Wt(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Yn.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Wt.prototype.rpcCall=function r(e,t,n,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return Yn.asPromise(r,s,e,t,n,o);if(!s.rpcImpl){setTimeout(function(){i(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(u,f){if(u)return s.emit("error",u,e),i(u);if(f===null){s.end(!0);return}if(!(f instanceof n))try{f=n[s.responseDelimited?"decodeDelimited":"decode"](f)}catch(c){return s.emit("error",c,e),i(c)}return s.emit("data",f,e),i(null,f)})}catch(a){s.emit("error",a,e),setTimeout(function(){i(a)},0);return}};Wt.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var xa=D(Ca=>{"use strict";var Ol=Ca;Ol.Service=va()});var Sa=D((ay,Aa)=>{"use strict";Aa.exports={}});var Ta=D(Oa=>{"use strict";var G=Oa;G.build="minimal";G.Writer=Hn();G.BufferWriter=la();G.Reader=Wn();G.BufferReader=Da();G.util=Me();G.rpc=xa();G.roots=Sa();G.configure=Ba;function Ba(){G.util._configure(),G.Writer._configure(G.BufferWriter),G.Reader._configure(G.BufferReader)}Ba()});var Ve=D((cy,_a)=>{"use strict";_a.exports=Ta()});var Ia=D((Xn,Fa)=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Ur.BASE=2166136261;function Ur(r,e=Ur.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}Xn.default=Ur;Fa.exports=Ur});var Pa=D((dy,Ra)=>{Ra.exports=Zn;var $a=128,_l=127,kl=~_l,Nl=Math.pow(2,31);function Zn(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Zn.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=Nl;)e[t++]=r&255|$a,r/=128;for(;r&kl;)e[t++]=r&255|$a,r>>>=7;return e[t]=r|0,Zn.bytes=t-n+1,e}});var La=D((py,ja)=>{ja.exports=Qn;var Fl=128,Ua=127;function Qn(r,n){var t=0,n=n||0,o=0,i=n,s,a=r.length;do{if(i>=a||o>49)throw Qn.bytes=0,new RangeError("Could not decode varint");s=r[i++],t+=o<28?(s&Ua)<<o:(s&Ua)*Math.pow(2,o),o+=7}while(s>=Fl);return Qn.bytes=i-n,t}});var Ma=D((hy,qa)=>{var Il=Math.pow(2,7),$l=Math.pow(2,14),Rl=Math.pow(2,21),Pl=Math.pow(2,28),Ul=Math.pow(2,35),jl=Math.pow(2,42),Ll=Math.pow(2,49),ql=Math.pow(2,56),Ml=Math.pow(2,63);qa.exports=function(r){return r<Il?1:r<$l?2:r<Rl?3:r<Pl?4:r<Ul?5:r<jl?6:r<Ll?7:r<ql?8:r<Ml?9:10}});var Yt=D((yy,za)=>{za.exports={encode:Pa(),decode:La(),encodingLength:Ma()}});var ro={};$(ro,{concat:()=>Zt});function Zt(r,e){e||(e=r.reduce((o,i)=>o+i.length,0));let t=hr(e),n=0;for(let o of r)t.set(o,n),n+=o.length;return t}var Lr=S(()=>{xn()});var io=D(($y,Xa)=>{"use strict";function Ya(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function Wl(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return Ya(r,t)}catch{t.message=r.message,t.stack=r.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),Ya(new o,t)}}Xa.exports=Wl});var du=D((Qy,lu)=>{"use strict";var fu="[a-fA-F\\d:]",Je=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${fu})|(?<=${fu})(?=\\s|$))`:"",me="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",P="[a-fA-F\\d]{1,4}",Jr=`
(?:
(?:${P}:){7}(?:${P}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${P}:){6}(?:${me}|:${P}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${P}:){5}(?::${me}|(?::${P}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${P}:){4}(?:(?::${P}){0,1}:${me}|(?::${P}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${P}:){3}(?:(?::${P}){0,2}:${me}|(?::${P}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${P}:){2}(?:(?::${P}){0,3}:${me}|(?::${P}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${P}:){1}(?:(?::${P}){0,4}:${me}|(?::${P}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${P}){0,5}:${me}|(?::${P}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),id=new RegExp(`(?:^${me}$)|(?:^${Jr}$)`),sd=new RegExp(`^${me}$`),ad=new RegExp(`^${Jr}$`),ho=r=>r&&r.exact?id:new RegExp(`(?:${Je(r)}${me}${Je(r)})|(?:${Je(r)}${Jr}${Je(r)})`,"g");ho.v4=r=>r&&r.exact?sd:new RegExp(`${Je(r)}${me}${Je(r)}`,"g");ho.v6=r=>r&&r.exact?ad:new RegExp(`${Je(r)}${Jr}${Je(r)}`,"g");lu.exports=ho});var hu=D((eg,pu)=>{"use strict";var yo=du(),St=r=>yo({exact:!0}).test(r);St.v4=r=>yo.v4({exact:!0}).test(r);St.v6=r=>yo.v6({exact:!0}).test(r);St.version=r=>St(r)?St.v4(r)?4:6:void 0;pu.exports=St});var bu=D((tg,wu)=>{"use strict";var mo=hu(),{toString:yu}=(Te(),H(Pt)),ud=mo,go=mo.v4,gu=mo.v6,mu=function(r,e,t){t=~~t;let n;if(go(r))n=e||new Uint8Array(t+4),r.split(/\./g).map(function(o){n[t++]=parseInt(o,10)&255});else if(gu(r)){let o=r.split(":",8),i;for(i=0;i<o.length;i++){let s=go(o[i]),a;s&&(a=mu(o[i]),o[i]=yu(a.slice(0,2),"base16")),a&&++i<8&&o.splice(i,0,yu(a.slice(2,4),"base16"))}if(o[0]==="")for(;o.length<8;)o.unshift("0");else if(o[o.length-1]==="")for(;o.length<8;)o.push("0");else if(o.length<8){for(i=0;i<o.length&&o[i]!=="";i++);let s=[i,"1"];for(i=9-o.length;i>0;i--)s.push("0");o.splice.apply(o,s)}for(n=e||new Uint8Array(t+16),i=0;i<o.length;i++){let s=parseInt(o[i],16);n[t++]=s>>8&255,n[t++]=s&255}}if(!n)throw Error("Invalid ip address: "+r);return n},cd=function(r,e,t){e=~~e,t=t||r.length-e;let n=[],o,i=new DataView(r.buffer);if(t===4){for(let s=0;s<t;s++)n.push(r[e+s]);o=n.join(".")}else if(t===16){for(let s=0;s<t;s+=2)n.push(i.getUint16(e+s).toString(16));o=n.join(":"),o=o.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),o=o.replace(/:{3,4}/,"::")}return o};wu.exports={isIP:ud,isV4:go,isV6:gu,toBytes:mu,toString:cd}});var Gr=D((rg,Eu)=>{"use strict";function W(r){if(typeof r=="number"){if(W.codes[r])return W.codes[r];throw new Error("no protocol with code: "+r)}else if(typeof r=="string"){if(W.names[r])return W.names[r];throw new Error("no protocol with name: "+r)}throw new Error("invalid protocol id type: "+r)}var ce=-1;W.lengthPrefixedVarSize=ce;W.V=ce;W.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,ce,"ip6zone"],[53,ce,"dns","resolvable"],[54,ce,"dns4","resolvable"],[55,ce,"dns6","resolvable"],[56,ce,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,ce,"unix",!1,"path"],[421,ce,"ipfs"],[421,ce,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,ce,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,ce,"memory"]];W.names={};W.codes={};W.table.map(r=>{let e=Du.apply(null,r);return W.codes[e.code]=e,W.names[e.name]=e,null});W.object=Du;function Du(r,e,t,n,o){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(o)}}Eu.exports=W});var Tu=D((ng,Ou)=>{"use strict";var Wr=bu(),xu=Gr(),{CID:fd}=(Ee(),H(un)),{base32:Au}=(Xe(),H(fr)),{base58btc:ld}=($t(),H(It)),dd=(Pe(),H(Be)),Bt=Yt(),{toString:Yr}=(Te(),H(Pt)),{fromString:Su}=(dt(),H(fi)),{concat:Xr}=(Lr(),H(ro));Ou.exports=rr;function rr(r,e){return e instanceof Uint8Array?rr.toString(r,e):rr.toBytes(r,e)}rr.toString=function(e,t){switch(xu(e).code){case 4:case 41:return pd(t);case 6:case 273:case 33:case 132:return Bu(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return yd(t);case 421:return md(t);case 444:return Cu(t);case 445:return Cu(t);default:return Yr(t,"base16")}};rr.toBytes=function(e,t){switch(xu(e).code){case 4:return vu(t);case 41:return vu(t);case 6:case 273:case 33:case 132:return wo(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return hd(t);case 421:return gd(t);case 444:return wd(t);case 445:return bd(t);default:return Su(t,"base16")}};function vu(r){if(!Wr.isIP(r))throw new Error("invalid ip address");return Wr.toBytes(r)}function pd(r){let e=Wr.toString(r);if(!e||!Wr.isIP(e))throw new Error("invalid ip address");return e}function wo(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function Bu(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function hd(r){let e=Su(r),t=Uint8Array.from(Bt.encode(e.length));return Xr([t,e],t.length+e.length)}function yd(r){let e=Bt.decode(r);if(r=r.slice(Bt.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return Yr(r)}function gd(r){let e;r[0]==="Q"||r[0]==="1"?e=dd.decode(ld.decode(`z${r}`)).bytes:e=fd.parse(r).multihash.bytes;let t=Uint8Array.from(Bt.encode(e.length));return Xr([t,e],t.length+e.length)}function md(r){let e=Bt.decode(r),t=r.slice(Bt.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return Yr(t,"base58btc")}function wd(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let t=Au.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=wo(n);return Xr([t,o],t.length+o.length)}function bd(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let t=Au.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=wo(n);return Xr([t,o],t.length+o.length)}function Cu(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=Yr(e,"base32"),o=Bu(t);return n+":"+o}});var qu=D((og,Lu)=>{"use strict";var ku=Tu(),bo=Gr(),nr=Yt(),{concat:_u}=(Lr(),H(ro)),{toString:Dd}=(Te(),H(Pt));Lu.exports={stringToStringTuples:Nu,stringTuplesToString:Fu,tuplesToStringTuples:$u,stringTuplesToTuples:Iu,bytesToTuples:Do,tuplesToBytes:Ru,bytesToString:Ed,stringToBytes:Uu,fromString:vd,fromBytes:ju,validateBytes:Eo,isValidBytes:Cd,cleanPath:Zr,ParseError:vo,protoFromTuple:or,sizeForAddr:Pu};function Nu(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let o=t[n],i=bo(o);if(i.size===0){e.push([o]);continue}if(n++,n>=t.length)throw vo("invalid address: "+r);if(i.path){e.push([o,Zr(t.slice(n).join("/"))]);break}e.push([o,t[n]])}return e}function Fu(r){let e=[];return r.map(t=>{let n=or(t);return e.push(n.name),t.length>1&&e.push(t[1]),null}),Zr(e.join("/"))}function Iu(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=or(e);return e.length>1?[t.code,ku.toBytes(t.code,e[1])]:[t.code]})}function $u(r){return r.map(e=>{let t=or(e);return e[1]?[t.code,ku.toString(t.code,e[1])]:[t.code]})}function Ru(r){return ju(_u(r.map(e=>{let t=or(e),n=Uint8Array.from(nr.encode(t.code));return e.length>1&&(n=_u([n,e[1]])),n})))}function Pu(r,e){return r.size>0?r.size/8:r.size===0?0:nr.decode(e)+nr.decode.bytes}function Do(r){let e=[],t=0;for(;t<r.length;){let n=nr.decode(r,t),o=nr.decode.bytes,i=bo(n),s=Pu(i,r.slice(t+o));if(s===0){e.push([n]),t+=o;continue}let a=r.slice(t+o,t+o+s);if(t+=s+o,t>r.length)throw vo("Invalid address Uint8Array: "+Dd(r,"base16"));e.push([n,a])}return e}function Ed(r){let e=Do(r),t=$u(e);return Fu(t)}function Uu(r){r=Zr(r);let e=Nu(r),t=Iu(e);return Ru(t)}function vd(r){return Uu(r)}function ju(r){let e=Eo(r);if(e)throw e;return Uint8Array.from(r)}function Eo(r){try{Do(r)}catch(e){return e}}function Cd(r){return Eo(r)===void 0}function Zr(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function vo(r){return new Error("Error parsing address: "+r)}function or(r){return bo(r[0])}});var Mu={};$(Mu,{equals:()=>xd});function xd(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var zu=S(()=>{});var Ju=D((ig,Hu)=>{"use strict";var we=qu(),Ot=Gr(),Vu=Yt(),{CID:Ad}=(Ee(),H(un)),{base58btc:Sd}=($t(),H(It)),Bd=io(),Od=Symbol.for("nodejs.util.inspect.custom"),{toString:Qr}=(Te(),H(Pt)),{equals:Td}=(zu(),H(Mu)),Co=new Map,Ku=Symbol.for("@multiformats/js-multiaddr/multiaddr"),V=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,Ku,{value:!0}),e instanceof Uint8Array)this.bytes=we.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=we.fromString(e)}else if(V.isMultiaddr(e))this.bytes=we.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return we.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},t=this.toString().split("/");return e.family=t[1]==="ip4"?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},Ot(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let o=Vu.decode(t,n),i=Vu.decode.bytes,s=Ot(o);n+=we.sizeForAddr(s,t.slice(n+i))+i,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return we.bytesToTuples(this.bytes)}stringTuples(){let e=we.bytesToTuples(this.bytes);return we.tuplesToStringTuples(e)}encapsulate(e){return e=new V(e),new V(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new V(n.slice(0,o))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new V(we.tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Ot.names.ipfs.code).pop();if(t&&t[1]){let n=t[1];return n[0]==="Q"||n[0]==="1"?Qr(Sd.decode(`z${n}`),"base58btc"):Qr(Ad.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>!!Ot(t[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return Td(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(o=>o.resolvable);if(!e)return[this];let t=Co.get(e.name);if(!t)throw Bd(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map(o=>new V(o))}nodeAddress(){let e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let t=(e||this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new V("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return V.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return e instanceof V||Boolean(e&&e[Ku])}[Od](){return"<Multiaddr "+Qr(this.bytes,"base16")+" - "+we.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+Qr(this.bytes,"base16")+" - "+we.bytesToString(this.bytes)+">"}};V.protocols=Ot;V.resolvers=Co;function _d(r){return new V(r)}Hu.exports={Multiaddr:V,multiaddr:_d,protocols:Ot,resolvers:Co}});var Ud={};$(Ud,{errors:()=>re,getCurrentRepoVersion:()=>Rd,getLatestMigrationVersion:()=>Zu,migrate:()=>Id,migrations:()=>Pd,revert:()=>$d});Ee();var Mo=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");Te();dt();var ke="/",li=new TextEncoder().encode(ke),gr=li[0],A=class{constructor(e,t){if(typeof e=="string")this._buf=_e(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==gr)throw new Error("Invalid key")}toString(e="utf8"){return Oe(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new A(e.join(ke))}static random(){return new A(Mo().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new A(e):typeof e.uint8Array=="function"?new A(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=li),this._buf[0]!==gr){let e=new Uint8Array(this._buf.byteLength+1);e.fill(gr,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===gr;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let o=0;o<t.length;o++){if(n.length<o+1)return!1;let i=t[o],s=n[o];if(i<s)return!0;if(i>s)return!1}return t.length<n.length}reverse(){return A.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(ke).slice(1)}type(){return hf(this.baseNamespace())}name(){return yf(this.baseNamespace())}instance(e){return new A(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(ke)||(e+=ke),e+=this.type(),new A(e)}parent(){let e=this.list();return e.length===1?new A(ke):new A(e.slice(0,-1).join(ke))}child(e){return this.toString()===ke?e:e.toString()===ke?this:new A(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return A.withNamespaces([...this.namespaces(),...gf(e.map(t=>t.namespaces()))])}};function hf(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function yf(r){let e=r.split(":");return e[e.length-1]}function gf(r){return[].concat(...r)}var wi=z(br(),1),bi=z(Bn(),1);Xe();vn();Pe();var _f=(0,wi.default)("ipfs:repo:migrator:migration-8");function Di(r){return r.child?Di(r.child):r}function kf(r){try{let e=J.decode(`b${r.toString().toLowerCase().slice(1)}`),t=E.decode(e).multihash.bytes,n=J.encode(t).slice(1).toUpperCase();return new A(`/${n}`,!1)}catch{return r}}function Nf(r){try{let e=J.decode(`b${r.toString().toLowerCase().slice(1)}`),t=Ye(e),n=J.encode(E.createV1(ni,t).bytes).slice(1);return new A(`/${n.toUpperCase()}`,!1)}catch{return r}}async function mi(r,e,t){let n=r.blocks;await n.open();let o=Di(n),i=await(0,bi.default)(o.queryKeys({filters:[s=>t(s).toString()!==s.toString()]}));try{let s=0;for await(let a of o.query({})){let u=t(a.key);u.toString()!==a.key.toString()&&(s+=1,_f(`Migrating Block from ${a.key} to ${u}`,await o.has(a.key)),await o.delete(a.key),await o.put(u,a.value),e(s/i*100,`Migrated Block from ${a.key} to ${u}`))}}finally{await n.close()}}var Ei={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>mi(r,e,kf),revert:(r,e=()=>{})=>mi(r,e,Nf)};Ee();Ee();var Ff=new TextDecoder;function On(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let o=r[e++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,e]}function Dr(r,e){let t;[t,e]=On(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function vi(r,e){let t;return[t,e]=On(r,e),[t&7,t>>3,e]}function If(r){let e={},t=r.length,n=0;for(;n<t;){let o,i;if([o,i,n]=vi(r,n),i===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Dr(r,n)}else if(i===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=Dr(r,n),e.Name=Ff.decode(s)}else if(i===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=On(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Ci(r){let e=r.length,t=0,n,o=!1,i;for(;t<e;){let a,u;if([a,u,t]=vi(r,t),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(u===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=Dr(r,t),n&&(o=!0)}else if(u===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,t]=Dr(r,t),n.push(If(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${u}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return i&&(s.Data=i),s.Links=n||[],s}var Ai=new TextEncoder,xi=2**32,$f=2**31;function Rf(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Ut(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=Ai.encode(r.Name);t-=n.length,e.set(n,t),t=Ut(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Ut(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function Si(r){let e=Uf(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Ut(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let o=r.Links.length-1;o>=0;o--){let i=Rf(r.Links[o],t.subarray(0,n));n-=i,n=Ut(t,n,i)-1,t[n]=18}return t}function Pf(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+gt(t)}if(typeof r.Name=="string"){let t=Ai.encode(r.Name).length;e+=1+t+gt(t)}return typeof r.Tsize=="number"&&(e+=1+gt(r.Tsize)),e}function Uf(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+gt(t)}if(r.Links)for(let t of r.Links){let n=Pf(t);e+=1+n+gt(n)}return e}function Ut(r,e,t){e-=gt(t);let n=e;for(;t>=$f;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function gt(r){return r%2===0&&r++,Math.floor((jf(r)+6)/7)}function jf(r){let e=0;return r>=xi&&(r=Math.floor(r/xi),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+Lf[r]}var Lf=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];Ee();var qf=["Data","Links"],Mf=["Hash","Name","Tsize"],Bi=new TextEncoder;function zf(r,e){if(r===e)return 0;let t=r.Name?Bi.encode(r.Name):[],n=e.Name?Bi.encode(e.Name):[],o=t.length,i=n.length;for(let s=0,a=Math.min(o,i);s<a;++s)if(t[s]!==n[s]){o=t[s],i=n[s];break}return o<i?-1:i<o?1:0}function Oi(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function Ti(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!Oi(r,qf))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Oi(t,Mf))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&zf(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var Er=112;function jt(r){Ti(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),Si(e)}function Lt(r){let e=Ci(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let o={};try{o.Hash=E.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),t}var Vf=["string","number","bigint","symbol"],Kf=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ki(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(Vf.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(Hf(r))return"Buffer";let t=Jf(r);return t||"Object"}function Hf(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function Jf(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(Kf.includes(e))return e}var l=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};l.uint=new l(0,"uint",!0);l.negint=new l(1,"negint",!0);l.bytes=new l(2,"bytes",!0);l.string=new l(3,"string",!0);l.array=new l(4,"array",!1);l.map=new l(5,"map",!1);l.tag=new l(6,"tag",!1);l.float=new l(7,"float",!0);l.false=new l(7,"false",!0);l.true=new l(7,"true",!0);l.null=new l(7,"null",!0);l.undefined=new l(7,"undefined",!0);l.break=new l(7,"break",!0);var y=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var mt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Gf=new TextDecoder,Wf=new TextEncoder;function vr(r){return mt&&globalThis.Buffer.isBuffer(r)}function Tn(r){return r instanceof Uint8Array?vr(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var $i=mt?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):Fi(r,e,t):(r,e,t)=>t-e>64?Gf.decode(r.subarray(e,t)):Fi(r,e,t),Ri=mt?r=>r.length>64?globalThis.Buffer.from(r):Ni(r):r=>r.length>64?Wf.encode(r):Ni(r),ve=r=>Uint8Array.from(r),wt=mt?(r,e,t)=>vr(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),Pi=mt?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),Tn(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let o of r)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},Ui=mt?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function ji(r,e){if(vr(r)&&vr(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function Ni(r,e=1/0){let t,n=r.length,o=null,i=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!o){if(t>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=t;continue}if(t<56320){(e-=3)>-1&&i.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,t<128){if((e-=1)<0)break;i.push(t)}else if(t<2048){if((e-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return i}function Fi(r,e,t){let n=[];for(;e<t;){let o=r[e],i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=t){let a,u,f,c;switch(s){case 1:o<128&&(i=o);break;case 2:a=r[e+1],(a&192)===128&&(c=(o&31)<<6|a&63,c>127&&(i=c));break;case 3:a=r[e+1],u=r[e+2],(a&192)===128&&(u&192)===128&&(c=(o&15)<<12|(a&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:a=r[e+1],u=r[e+2],f=r[e+3],(a&192)===128&&(u&192)===128&&(f&192)===128&&(c=(o&15)<<18|(a&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(i=c))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),e+=s}return Yf(n)}var Ii=4096;function Yf(r){let e=r.length;if(e<=Ii)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Ii));return t}var Xf=256,qt=class{constructor(e=Xf){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let o=t.length-(this.maxCursor-this.cursor)-1;t.set(e,o)}else{if(t){let o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Ui(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=wt(n,0,this.cursor)}else t=Pi(this.chunks,this.cursor);return e&&this.reset(),t}};var w="CBOR decode error:",_n="CBOR encode error:",Mt=[];Mt[23]=1;Mt[24]=2;Mt[25]=3;Mt[26]=5;Mt[27]=9;function Ne(r,e,t){if(r.length-e<t)throw new Error(`${w} not enough data for type`)}var U=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Z(r,e,t){Ne(r,e,1);let n=r[e];if(t.strict===!0&&n<U[0])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function Q(r,e,t){Ne(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<U[1])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function ee(r,e,t){Ne(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<U[2])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function te(r,e,t){Ne(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],o=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<U[3])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${w} integers outside of the safe integer range are not supported`)}function Li(r,e,t,n){return new y(l.uint,Z(r,e+1,n),2)}function qi(r,e,t,n){return new y(l.uint,Q(r,e+1,n),3)}function Mi(r,e,t,n){return new y(l.uint,ee(r,e+1,n),5)}function zi(r,e,t,n){return new y(l.uint,te(r,e+1,n),9)}function se(r,e){return M(r,0,e.value)}function M(r,e,t){if(t<U[0]){let n=Number(t);r.push([e|n])}else if(t<U[1]){let n=Number(t);r.push([e|24,n])}else if(t<U[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<U[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<U[4]){let o=[e|27,0,0,0,0,0,0,0],i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,r.push(o)}else throw new Error(`${w} encountered BigInt larger than allowable range`)}}se.encodedSize=function(e){return M.encodedSize(e.value)};M.encodedSize=function(e){return e<U[0]?1:e<U[1]?2:e<U[2]?3:e<U[3]?5:9};se.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function Vi(r,e,t,n){return new y(l.negint,-1-Z(r,e+1,n),2)}function Ki(r,e,t,n){return new y(l.negint,-1-Q(r,e+1,n),3)}function Hi(r,e,t,n){return new y(l.negint,-1-ee(r,e+1,n),5)}var kn=BigInt(-1),Ji=BigInt(1);function Gi(r,e,t,n){let o=te(r,e+1,n);if(typeof o!="bigint"){let i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new y(l.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${w} integers outside of the safe integer range are not supported`);return new y(l.negint,kn-BigInt(o),9)}function Cr(r,e){let t=e.value,n=typeof t=="bigint"?t*kn-Ji:t*-1-1;M(r,e.type.majorEncoded,n)}Cr.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*kn-Ji:t*-1-1;return n<U[0]?1:n<U[1]?2:n<U[2]?3:n<U[3]?5:9};Cr.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function zt(r,e,t,n){Ne(r,e,t+n);let o=wt(r,e+t,e+t+n);return new y(l.bytes,o,t+n)}function Wi(r,e,t,n){return zt(r,e,1,t)}function Yi(r,e,t,n){return zt(r,e,2,Z(r,e+1,n))}function Xi(r,e,t,n){return zt(r,e,3,Q(r,e+1,n))}function Zi(r,e,t,n){return zt(r,e,5,ee(r,e+1,n))}function Qi(r,e,t,n){let o=te(r,e+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer bytes lengths not supported`);return zt(r,e,9,o)}function xr(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===l.string?Ri(r.value):r.value),r.encodedBytes}function bt(r,e){let t=xr(e);M(r,e.type.majorEncoded,t.length),r.push(t)}bt.encodedSize=function(e){let t=xr(e);return M.encodedSize(t.length)+t.length};bt.compareTokens=function(e,t){return Qf(xr(e),xr(t))};function Qf(r,e){return r.length<e.length?-1:r.length>e.length?1:ji(r,e)}function Vt(r,e,t,n,o){let i=t+n;Ne(r,e,i);let s=new y(l.string,$i(r,e+t,e+i),i);return o.retainStringBytes===!0&&(s.byteValue=wt(r,e+t,e+i)),s}function es(r,e,t,n){return Vt(r,e,1,t,n)}function ts(r,e,t,n){return Vt(r,e,2,Z(r,e+1,n),n)}function rs(r,e,t,n){return Vt(r,e,3,Q(r,e+1,n),n)}function ns(r,e,t,n){return Vt(r,e,5,ee(r,e+1,n),n)}function os(r,e,t,n){let o=te(r,e+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer string lengths not supported`);return Vt(r,e,9,o,n)}var is=bt;function Dt(r,e,t,n){return new y(l.array,n,t)}function ss(r,e,t,n){return Dt(r,e,1,t)}function as(r,e,t,n){return Dt(r,e,2,Z(r,e+1,n))}function us(r,e,t,n){return Dt(r,e,3,Q(r,e+1,n))}function cs(r,e,t,n){return Dt(r,e,5,ee(r,e+1,n))}function fs(r,e,t,n){let o=te(r,e+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer array lengths not supported`);return Dt(r,e,9,o)}function ls(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return Dt(r,e,1,1/0)}function Ar(r,e){M(r,l.array.majorEncoded,e.value)}Ar.compareTokens=se.compareTokens;Ar.encodedSize=function(e){return M.encodedSize(e.value)};function Et(r,e,t,n){return new y(l.map,n,t)}function ds(r,e,t,n){return Et(r,e,1,t)}function ps(r,e,t,n){return Et(r,e,2,Z(r,e+1,n))}function hs(r,e,t,n){return Et(r,e,3,Q(r,e+1,n))}function ys(r,e,t,n){return Et(r,e,5,ee(r,e+1,n))}function gs(r,e,t,n){let o=te(r,e+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer map lengths not supported`);return Et(r,e,9,o)}function ms(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return Et(r,e,1,1/0)}function Sr(r,e){M(r,l.map.majorEncoded,e.value)}Sr.compareTokens=se.compareTokens;Sr.encodedSize=function(e){return M.encodedSize(e.value)};function ws(r,e,t,n){return new y(l.tag,t,1)}function bs(r,e,t,n){return new y(l.tag,Z(r,e+1,n),2)}function Ds(r,e,t,n){return new y(l.tag,Q(r,e+1,n),3)}function Es(r,e,t,n){return new y(l.tag,ee(r,e+1,n),5)}function vs(r,e,t,n){return new y(l.tag,te(r,e+1,n),9)}function Br(r,e){M(r,l.tag.majorEncoded,e.value)}Br.compareTokens=se.compareTokens;Br.encodedSize=function(e){return M.encodedSize(e.value)};var il=20,sl=21,al=22,ul=23;function Cs(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${w} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new y(l.null,null,1):new y(l.undefined,void 0,1)}function xs(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return new y(l.break,void 0,1)}function Nn(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${w} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${w} Infinity values are not supported`)}return new y(l.float,r,e)}function As(r,e,t,n){return Nn(Fn(r,e+1),3,n)}function Ss(r,e,t,n){return Nn(In(r,e+1),5,n)}function Bs(r,e,t,n){return Nn(ks(r,e+1),9,n)}function Or(r,e,t){let n=e.value;if(n===!1)r.push([l.float.majorEncoded|il]);else if(n===!0)r.push([l.float.majorEncoded|sl]);else if(n===null)r.push([l.float.majorEncoded|al]);else if(n===void 0)r.push([l.float.majorEncoded|ul]);else{let o,i=!1;(!t||t.float64!==!0)&&(Ts(n),o=Fn(de,1),n===o||Number.isNaN(n)?(de[0]=249,r.push(de.slice(0,3)),i=!0):(_s(n),o=In(de,1),n===o&&(de[0]=250,r.push(de.slice(0,5)),i=!0))),i||(cl(n),o=ks(de,1),de[0]=251,r.push(de.slice(0,9)))}}Or.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){Ts(n);let o=Fn(de,1);if(n===o||Number.isNaN(n))return 3;if(_s(n),o=In(de,1),n===o)return 5}return 9};var Os=new ArrayBuffer(9),ae=new DataView(Os,1),de=new Uint8Array(Os,0);function Ts(r){if(r===1/0)ae.setUint16(0,31744,!1);else if(r===-1/0)ae.setUint16(0,64512,!1);else if(Number.isNaN(r))ae.setUint16(0,32256,!1);else{ae.setFloat32(0,r);let e=ae.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)ae.setUint16(0,31744,!1);else if(t===0)ae.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let o=t-127;o<-24?ae.setUint16(0,0):o<-14?ae.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):ae.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Fn(r,e){if(r.length-e<2)throw new Error(`${w} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,o=t&1023,i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function _s(r){ae.setFloat32(0,r,!1)}function In(r,e){if(r.length-e<4)throw new Error(`${w} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function cl(r){ae.setFloat64(0,r,!1)}function ks(r,e){if(r.length-e<8)throw new Error(`${w} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}Or.compareTokens=se.compareTokens;function x(r,e,t){throw new Error(`${w} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function Tr(r){return()=>{throw new Error(`${w} ${r}`)}}var p=[];for(let r=0;r<=23;r++)p[r]=x;p[24]=Li;p[25]=qi;p[26]=Mi;p[27]=zi;p[28]=x;p[29]=x;p[30]=x;p[31]=x;for(let r=32;r<=55;r++)p[r]=x;p[56]=Vi;p[57]=Ki;p[58]=Hi;p[59]=Gi;p[60]=x;p[61]=x;p[62]=x;p[63]=x;for(let r=64;r<=87;r++)p[r]=Wi;p[88]=Yi;p[89]=Xi;p[90]=Zi;p[91]=Qi;p[92]=x;p[93]=x;p[94]=x;p[95]=Tr("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)p[r]=es;p[120]=ts;p[121]=rs;p[122]=ns;p[123]=os;p[124]=x;p[125]=x;p[126]=x;p[127]=Tr("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)p[r]=ss;p[152]=as;p[153]=us;p[154]=cs;p[155]=fs;p[156]=x;p[157]=x;p[158]=x;p[159]=ls;for(let r=160;r<=183;r++)p[r]=ds;p[184]=ps;p[185]=hs;p[186]=ys;p[187]=gs;p[188]=x;p[189]=x;p[190]=x;p[191]=ms;for(let r=192;r<=215;r++)p[r]=ws;p[216]=bs;p[217]=Ds;p[218]=Es;p[219]=vs;p[220]=x;p[221]=x;p[222]=x;p[223]=x;for(let r=224;r<=243;r++)p[r]=Tr("simple values are not supported");p[244]=x;p[245]=x;p[246]=x;p[247]=Cs;p[248]=Tr("simple values are not supported");p[249]=As;p[250]=Ss;p[251]=Bs;p[252]=x;p[253]=x;p[254]=x;p[255]=xs;var pe=[];for(let r=0;r<24;r++)pe[r]=new y(l.uint,r,1);for(let r=-1;r>=-24;r--)pe[31-r]=new y(l.negint,r,1);pe[64]=new y(l.bytes,new Uint8Array(0),1);pe[96]=new y(l.string,"",1);pe[128]=new y(l.array,0,1);pe[160]=new y(l.map,0,1);pe[244]=new y(l.false,!1,1);pe[245]=new y(l.true,!0,1);pe[246]=new y(l.null,null,1);function Ns(r){switch(r.type){case l.false:return ve([244]);case l.true:return ve([245]);case l.null:return ve([246]);case l.bytes:return r.value.length?void 0:ve([64]);case l.string:return r.value===""?ve([96]):void 0;case l.array:return r.value===0?ve([128]):void 0;case l.map:return r.value===0?ve([160]):void 0;case l.uint:return r.value<24?ve([Number(r.value)]):void 0;case l.negint:if(r.value>=-24)return ve([31-Number(r.value)])}}var ll={float64:!1,mapSorter:hl,quickEncodeToken:Ns};function dl(){let r=[];return r[l.uint.major]=se,r[l.negint.major]=Cr,r[l.bytes.major]=bt,r[l.string.major]=is,r[l.array.major]=Ar,r[l.map.major]=Sr,r[l.tag.major]=Br,r[l.float.major]=Or,r}var Fs=dl(),$n=new qt,vt=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${_n} object contains circular references`);return new vt(t,e)}},je={null:new y(l.null,null),undefined:new y(l.undefined,void 0),true:new y(l.true,!0),false:new y(l.false,!1),emptyArray:new y(l.array,0),emptyMap:new y(l.map,0)},Le={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new y(l.float,r):r>=0?new y(l.uint,r):new y(l.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new y(l.uint,r):new y(l.negint,r)},Uint8Array(r,e,t,n){return new y(l.bytes,r)},string(r,e,t,n){return new y(l.string,r)},boolean(r,e,t,n){return r?je.true:je.false},null(r,e,t,n){return je.null},undefined(r,e,t,n){return je.undefined},ArrayBuffer(r,e,t,n){return new y(l.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new y(l.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[je.emptyArray,new y(l.break)]:je.emptyArray;n=vt.createCheck(n,r);let o=[],i=0;for(let s of r)o[i++]=_r(s,t,n);return t.addBreakTokens?[new y(l.array,r.length),o,new y(l.break)]:[new y(l.array,r.length),o]},Object(r,e,t,n){let o=e!=="Object",i=o?r.keys():Object.keys(r),s=o?r.size:i.length;if(!s)return t.addBreakTokens===!0?[je.emptyMap,new y(l.break)]:je.emptyMap;n=vt.createCheck(n,r);let a=[],u=0;for(let f of i)a[u++]=[_r(f,t,n),_r(o?r.get(f):r[f],t,n)];return pl(a,t),t.addBreakTokens?[new y(l.map,s),a,new y(l.break)]:[new y(l.map,s),a]}};Le.Map=Le.Object;Le.Buffer=Le.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Le[`${r}Array`]=Le.DataView;function _r(r,e={},t){let n=ki(r),o=e&&e.typeEncoders&&e.typeEncoders[n]||Le[n];if(typeof o=="function"){let s=o(r,n,e,t);if(s!=null)return s}let i=Le[n];if(!i)throw new Error(`${_n} unsupported type: ${n}`);return i(r,n,e,t)}function pl(r,e){e.mapSorter&&r.sort(e.mapSorter)}function hl(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let o=t.type.major,i=Fs[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function Is(r,e,t,n){if(Array.isArray(e))for(let o of e)Is(r,o,t,n);else t[e.type.major](r,e,n)}function yl(r,e,t){let n=_r(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let o=t.quickEncodeToken(n);if(o)return o;let i=e[n.type.major];if(i.encodedSize){let s=i.encodedSize(n,t),a=new qt(s);if(i(a,n,t),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Tn(a.chunks[0])}}return $n.reset(),Is($n,n,e,t),$n.toBytes(!0)}function kr(r,e){return e=Object.assign({},ll,e),yl(r,Fs,e)}var gl={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Rn=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=pe[e];if(t===void 0){let n=p[e];if(!n)throw new Error(`${w} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;t=n(this.data,this.pos,o,this.options)}return this.pos+=t.encodedLength,t}},Kt=Symbol.for("DONE"),Nr=Symbol.for("BREAK");function ml(r,e,t){let n=[];for(let o=0;o<r.value;o++){let i=Ht(e,t);if(i===Nr){if(r.value===1/0)break;throw new Error(`${w} got unexpected break to lengthed array`)}if(i===Kt)throw new Error(`${w} found array but not enough entries (got ${o}, expected ${r.value})`);n[o]=i}return n}function wl(r,e,t){let n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let s=0;s<r.value;s++){let a=Ht(e,t);if(a===Nr){if(r.value===1/0)break;throw new Error(`${w} got unexpected break to lengthed map`)}if(a===Kt)throw new Error(`${w} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${w} non-string keys not supported (got ${typeof a})`);let u=Ht(e,t);if(u===Kt)throw new Error(`${w} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?i.set(a,u):o[a]=u}return n?i:o}function Ht(r,e){if(r.done())return Kt;let t=r.next();if(t.type===l.break)return Nr;if(t.type.terminal)return t.value;if(t.type===l.array)return ml(t,r,e);if(t.type===l.map)return wl(t,r,e);if(t.type===l.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=Ht(r,e);return e.tags[t.value](n)}throw new Error(`${w} tag not supported (${t.value})`)}throw new Error("unsupported")}function Pn(r,e){if(!(r instanceof Uint8Array))throw new Error(`${w} data to decode must be a Uint8Array`);e=Object.assign({},gl,e);let t=e.tokenizer||new Rn(r,e),n=Ht(t,e);if(n===Kt)throw new Error(`${w} did not find any content to decode`);if(n===Nr)throw new Error(`${w} got unexpected break`);if(!t.done())throw new Error(`${w} too many terminals, data makes no sense`);return n}Ee();var rt=z(Ve(),1),ka=rt.default.Reader,Tl=rt.default.Writer,fy=rt.default.util,Pr=rt.default.roots.default||(rt.default.roots.default={}),Na=Pr.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var o=Object.keys(n),i=0;i<o.length;++i)n[o[i]]!=null&&(this[o[i]]=n[o[i]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(o,i){return i||(i=Tl.create()),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&i.uint32(8).uint32(o.version),o.fanout!=null&&Object.hasOwnProperty.call(o,"fanout")&&i.uint32(16).uint32(o.fanout),o.seed!=null&&Object.hasOwnProperty.call(o,"seed")&&i.uint32(29).fixed32(o.seed),i},t.decode=function(o,i){o instanceof ka||(o=ka.create(o));for(var s=i===void 0?o.len:o.pos+i,a=new Pr.ipfs.pin.Set;o.pos<s;){var u=o.uint32();switch(u>>>3){case 1:a.version=o.uint32();break;case 2:a.fanout=o.uint32();break;case 3:a.seed=o.fixed32();break;default:o.skipType(u&7);break}}return a},t.fromObject=function(o){if(o instanceof Pr.ipfs.pin.Set)return o;var i=new Pr.ipfs.pin.Set;return o.version!=null&&(i.version=o.version>>>0),o.fanout!=null&&(i.fanout=o.fanout>>>0),o.seed!=null&&(i.seed=o.seed>>>0),i},t.toObject=function(o,i){i||(i={});var s={};return i.defaults&&(s.version=0,s.fanout=0,s.seed=0),o.version!=null&&o.hasOwnProperty("version")&&(s.version=o.version),o.fanout!=null&&o.hasOwnProperty("fanout")&&(s.fanout=o.fanout),o.seed!=null&&o.hasOwnProperty("seed")&&(s.seed=o.seed),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,rt.default.util.toJSONOptions)},t}(),e}(),r})();var Ha=z(Ia(),1),qr=z(Yt(),1);Xe();Ee();var Xt=new A("/local/pins"),jr=256,Va=8192,eo=E.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),nt={direct:"direct",recursive:"recursive"};function to(r){return new A(`/${J.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}Lr();function Ka(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}Te();dt();pr();var no=Na.pin.Set;function zl(r){let e=r.Data;if(!e)throw new Error("No data present");let t=qr.default.decode(e),n=qr.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let o=e.slice(n,t+n),i=no.toObject(no.decode(o),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(i.version!==1)throw new Error(`Unsupported Set version: ${i.version}`);if(i.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:i,data:e.slice(t+n)}}function Vl(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let o=_e(e.toString()),i=Zt([t,o],t.byteLength+o.byteLength);return(0,Ha.default)(Oe(i))}async function*Ja(r,e){let t=zl(e),n=0;for(let o of e.Links){if(n<t.header.fanout){let i=o.Hash;if(!eo.equals(i)){let s=await r.get(i),a=Lt(s);yield*Ja(r,a)}}else yield o.Hash;n++}}async function*Qt(r,e,t){let n=e.Links.find(s=>s.Name===t);if(!n)throw new Error("No link found with name "+t);let o=await r.get(n.Hash),i=Lt(o);yield*Ja(r,i)}function Kl(r,e){return t(e,0);async function t(n,o){let i=no.encode({version:1,fanout:jr,seed:o}).finish(),s=qr.default.encode(i.length),a=Zt([s,i]),u=[];for(let c=0;c<jr;c++)u.push({Name:"",Tsize:1,Hash:eo});if(n.length<=Va){let c=n.map(b=>({link:{Name:"",Tsize:1,Hash:b.key},data:b.data||new Uint8Array})).sort((b,m)=>Ka(b.link.Hash.bytes,m.link.Hash.bytes)),d=u.concat(c.map(b=>b.link));return{Data:Zt([a,...c.map(b=>b.data)]),Links:d}}else{let c=n.reduce((h,b)=>{let m=Vl(o,b.key)%jr;return h[m]=m in h?h[m].concat([b]):[b],h},[]),d=0;for(let h of c){let b=await t(h,o+1);await f(b,d),d++}return{Data:a,Links:u}}async function f(c,d){let h=jt(c),b=await lt.digest(h),m=E.createV0(b);await r.put(m,h);let C=c.Links.reduce((_,F)=>_+(F.Tsize||0),0)+h.length;u[d]={Name:"",Tsize:C,Hash:m}}}}async function oo(r,e,t){let n=await Kl(r,t.map(u=>({key:u}))),o=jt(n),i=await lt.digest(o),s=E.createV0(i);await r.put(s,o);let a=n.Links.reduce((u,f)=>u+f.Tsize,0)+o.length;return{Name:e,Tsize:a,Hash:s}}var Mr=z(Bn(),1);pr();Pe();Xe();async function Jl(r,e,t,n){if(!await e.has(Xt))return;let o=await e.get(Xt),i=E.decode(o),s=await r.get(i),a=Lt(s),u=0,f=await(0,Mr.default)(Qt(r,a,nt.recursive))+await(0,Mr.default)(Qt(r,a,nt.direct));for await(let c of Qt(r,a,nt.recursive)){u++;let d={depth:1/0};c.version!==0&&(d.version=c.version),c.code!==Er&&(d.codec=c.code),await t.put(to(c),kr(d)),n(u/f*100,`Migrated recursive pin ${c}`)}for await(let c of Qt(r,a,nt.direct)){u++;let d={depth:0};c.version!==0&&(d.version=c.version),c.code!==Er&&(d.codec=c.code),await t.put(to(c),kr(d)),n(u/f*100,`Migrated direct pin ${c}`)}await r.delete(i),await e.delete(Xt)}async function Gl(r,e,t,n){let o=[],i=[],s=0,a=await(0,Mr.default)(t.queryKeys({}));for await(let{key:h,value:b}of t.query({})){s++;let m=Pn(b),C=E.create(m.version||0,m.codec||Er,Ye(J.decode("b"+h.toString().toLowerCase().split("/").pop())));m.depth===0?(n(s/a*100,`Reverted direct pin ${C}`),i.push(C)):(n(s/a*100,`Reverted recursive pin ${C}`),o.push(C))}n(100,"Updating pin root");let u={Links:[await oo(r,nt.direct,i),await oo(r,nt.recursive,o)]},f=jt(u),c=await lt.digest(f),d=E.createV0(c);await r.put(d,f),await e.put(Xt,d.bytes)}async function Ga(r,e,t){let n=r.blocks,o=r.datastore,i=r.pins;await n.open(),await o.open(),await i.open();try{await t(n,o,i,e)}finally{await i.close(),await o.close(),await n.close()}}var Wa={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>Ga(r,e,Jl),revert:(r,e=()=>{})=>Ga(r,e,Gl)};var Za=z(io(),1);function so(r){return r=r||new Error("Not Found"),(0,Za.default)(r,"ERR_NOT_FOUND")}var Qa=new A("/config"),er=new A("/version");function tr(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function Yl(r,e,t){let n=await e(r);if(n)return n;let o=tr(t);return o?new Promise((i,s)=>{let a=o.store("readonly").get(r.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{i(Boolean(a.result))}}):!1}async function Xl(r,e,t,n){if(await t(r))return e(r);let o=tr(n);if(!o)throw so();return new Promise((i,s)=>{let a=o.store("readonly").get(r.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return i(a.result);s(so())}})}function zr(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>Xl(n,e,t,r),r.has=n=>Yl(n,t,r),r}function ao(r){return{...r,root:zr(r.root),datastore:zr(r.datastore),pins:zr(r.pins),keys:zr(r.keys)}}dt();Te();async function Zl(r,e,t=()=>{}){let n=tr(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await nu(n,(i,s)=>[{type:"del",key:i},{type:"put",key:_e(i),value:s}])}async function Ql(r,e,t=()=>{}){let n=tr(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await nu(n,(i,s)=>[{type:"del",key:i},{type:"put",key:Oe(i),value:s}])}function tu(r){return r.child?tu(r.child):r}async function eu(r,e,t){let n=Object.entries(r).map(([s,a])=>({key:s,backend:tu(a)})).filter(({key:s,backend:a})=>a.constructor.name==="LevelDatastore").map(({key:s,backend:a})=>({name:s,store:a}));e(0,`Migrating ${n.length} dbs`);let o=0,i=s=>{e(Math.round(o/n.length*100),s)};for(let{name:s,store:a}of n){await a.open();try{await t(s,a,i)}finally{o++,await a.close()}}e(100,`Migrated ${n.length} dbs`)}var ru={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>eu(r,e,Zl),revert:(r,e=()=>{})=>eu(r,e,Ql)};function nu(r,e){function t(n,o){let i=r.store("readwrite"),s=i.transaction,a=0,u;s.onabort=()=>o(u||s.error||new Error("aborted by user")),s.oncomplete=()=>o();function f(){let c=n[a++],d=c.key,h;try{h=c.type==="del"?i.delete(d):i.put(c.value,d)}catch(b){u=b,s.abort();return}a<n.length&&(h.onsuccess=f)}f()}return new Promise((n,o)=>{let i=r.iterator(),s=u=>u;i._deserializeKey=i._deserializeValue=s,a();function a(){let u=(f,c,d)=>{if(f||c===void 0){let h=b=>{if(b){o(b);return}n()};i.end(h);return}t(e(c,d),a)};i.next(u)}})}var Ke=new A("/local/filesroot");async function ed(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(Ke)){let t=await r.root.get(Ke);await r.datastore.put(Ke,t),await r.root.delete(Ke)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function td(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(Ke)){let t=await r.datastore.get(Ke);await r.root.put(Ke,t),await r.datastore.delete(Ke)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var ou={version:11,description:"Store mfs root in the datastore",migrate:ed,revert:td};var Ao=z(Ve(),1);var ot=z(Ve(),1),iu=ot.default.Reader,rd=ot.default.Writer,nd=ot.default.util,Vr=ot.default.roots.default||(ot.default.roots.default={}),uo=Vr.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=nd.emptyArray,r.encode=function(t,n){if(n||(n=rd.create()),t.protocols!=null&&t.protocols.length)for(var o=0;o<t.protocols.length;++o)n.uint32(10).string(t.protocols[o]);return n},r.decode=function(t,n){t instanceof iu||(t=iu.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new Vr.Protocols;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:i.protocols&&i.protocols.length||(i.protocols=[]),i.protocols.push(t.string());break;default:t.skipType(s&7);break}}return i},r.fromObject=function(t){if(t instanceof Vr.Protocols)return t;var n=new Vr.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var o=0;o<t.protocols.length;++o)n.protocols[o]=String(t.protocols[o])}return n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.protocols=[]),t.protocols&&t.protocols.length){o.protocols=[];for(var i=0;i<t.protocols.length;++i)o.protocols[i]=t.protocols[i]}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,ot.default.util.toJSONOptions)},r})();var Fe=z(Ve(),1),xt=Fe.default.Reader,co=Fe.default.Writer,O=Fe.default.util,L=Fe.default.roots.default||(Fe.default.roots.default={}),fo=L.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=O.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=co.create()),t.addrs!=null&&t.addrs.length)for(var o=0;o<t.addrs.length;++o)L.Addresses.Address.encode(t.addrs[o],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&L.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof xt||(t=xt.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new L.Addresses;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:i.addrs&&i.addrs.length||(i.addrs=[]),i.addrs.push(L.Addresses.Address.decode(t,t.uint32()));break;case 2:i.certifiedRecord=L.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return i},r.fromObject=function(t){if(t instanceof L.Addresses)return t;var n=new L.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var o=0;o<t.addrs.length;++o){if(typeof t.addrs[o]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[o]=L.Addresses.Address.fromObject(t.addrs[o])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=L.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addrs=[]),n.defaults&&(o.certifiedRecord=null),t.addrs&&t.addrs.length){o.addrs=[];for(var i=0;i<t.addrs.length;++i)o.addrs[i]=L.Addresses.Address.toObject(t.addrs[i],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(o.certifiedRecord=L.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Fe.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var o=Object.keys(n),i=0;i<o.length;++i)n[o[i]]!=null&&(this[o[i]]=n[o[i]])}e.prototype.multiaddr=O.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:O.oneOfGetter(t=["isCertified"]),set:O.oneOfSetter(t)}),e.encode=function(o,i){return i||(i=co.create()),o.multiaddr!=null&&Object.hasOwnProperty.call(o,"multiaddr")&&i.uint32(10).bytes(o.multiaddr),o.isCertified!=null&&Object.hasOwnProperty.call(o,"isCertified")&&i.uint32(16).bool(o.isCertified),i},e.decode=function(o,i){o instanceof xt||(o=xt.create(o));for(var s=i===void 0?o.len:o.pos+i,a=new L.Addresses.Address;o.pos<s;){var u=o.uint32();switch(u>>>3){case 1:a.multiaddr=o.bytes();break;case 2:a.isCertified=o.bool();break;default:o.skipType(u&7);break}}return a},e.fromObject=function(o){if(o instanceof L.Addresses.Address)return o;var i=new L.Addresses.Address;return o.multiaddr!=null&&(typeof o.multiaddr=="string"?O.base64.decode(o.multiaddr,i.multiaddr=O.newBuffer(O.base64.length(o.multiaddr)),0):o.multiaddr.length&&(i.multiaddr=o.multiaddr)),o.isCertified!=null&&(i.isCertified=Boolean(o.isCertified)),i},e.toObject=function(o,i){i||(i={});var s={};return i.defaults&&(i.bytes===String?s.multiaddr="":(s.multiaddr=[],i.bytes!==Array&&(s.multiaddr=O.newBuffer(s.multiaddr)))),o.multiaddr!=null&&o.hasOwnProperty("multiaddr")&&(s.multiaddr=i.bytes===String?O.base64.encode(o.multiaddr,0,o.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(o.multiaddr):o.multiaddr),o.isCertified!=null&&o.hasOwnProperty("isCertified")&&(s.isCertified=o.isCertified,i.oneofs&&(s._isCertified="isCertified")),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Fe.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}return e.prototype.seq=O.Long?O.Long.fromBits(0,0,!0):0,e.prototype.raw=O.newBuffer([]),e.encode=function(n,o){return o||(o=co.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&o.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&o.uint32(18).bytes(n.raw),o},e.decode=function(n,o){n instanceof xt||(n=xt.create(n));for(var i=o===void 0?n.len:n.pos+o,s=new L.Addresses.CertifiedRecord;n.pos<i;){var a=n.uint32();switch(a>>>3){case 1:s.seq=n.uint64();break;case 2:s.raw=n.bytes();break;default:n.skipType(a&7);break}}return s},e.fromObject=function(n){if(n instanceof L.Addresses.CertifiedRecord)return n;var o=new L.Addresses.CertifiedRecord;return n.seq!=null&&(O.Long?(o.seq=O.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?o.seq=parseInt(n.seq,10):typeof n.seq=="number"?o.seq=n.seq:typeof n.seq=="object"&&(o.seq=new O.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?O.base64.decode(n.raw,o.raw=O.newBuffer(O.base64.length(n.raw)),0):n.raw.length&&(o.raw=n.raw)),o},e.toObject=function(n,o){o||(o={});var i={};if(o.defaults){if(O.Long){var s=new O.Long(0,0,!0);i.seq=o.longs===String?s.toString():o.longs===Number?s.toNumber():s}else i.seq=o.longs===String?"0":0;o.bytes===String?i.raw="":(i.raw=[],o.bytes!==Array&&(i.raw=O.newBuffer(i.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?i.seq=o.longs===String?String(n.seq):n.seq:i.seq=o.longs===String?O.Long.prototype.toString.call(n.seq):o.longs===Number?new O.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(i.raw=o.bytes===String?O.base64.encode(n.raw,0,n.raw.length):o.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Fe.default.util.toJSONOptions)},e}(),r})();var Ie=z(Ve(),1),At=Ie.default.Reader,lo=Ie.default.Writer,B=Ie.default.util,R=Ie.default.roots.default||(Ie.default.roots.default={}),po=R.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}r.prototype.addresses=B.emptyArray,r.prototype.protocols=B.emptyArray,r.prototype.metadata=B.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:B.oneOfGetter(e=["pubKey"]),set:B.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:B.oneOfGetter(e=["peerRecordEnvelope"]),set:B.oneOfSetter(e)}),r.encode=function(n,o){if(o||(o=lo.create()),n.addresses!=null&&n.addresses.length)for(var i=0;i<n.addresses.length;++i)R.Address.encode(n.addresses[i],o.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var i=0;i<n.protocols.length;++i)o.uint32(18).string(n.protocols[i]);if(n.metadata!=null&&n.metadata.length)for(var i=0;i<n.metadata.length;++i)R.Metadata.encode(n.metadata[i],o.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&o.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&o.uint32(42).bytes(n.peerRecordEnvelope),o},r.decode=function(n,o){n instanceof At||(n=At.create(n));for(var i=o===void 0?n.len:n.pos+o,s=new R.Peer;n.pos<i;){var a=n.uint32();switch(a>>>3){case 1:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(R.Address.decode(n,n.uint32()));break;case 2:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(n.string());break;case 3:s.metadata&&s.metadata.length||(s.metadata=[]),s.metadata.push(R.Metadata.decode(n,n.uint32()));break;case 4:s.pubKey=n.bytes();break;case 5:s.peerRecordEnvelope=n.bytes();break;default:n.skipType(a&7);break}}return s},r.fromObject=function(n){if(n instanceof R.Peer)return n;var o=new R.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");o.addresses=[];for(var i=0;i<n.addresses.length;++i){if(typeof n.addresses[i]!="object")throw TypeError(".Peer.addresses: object expected");o.addresses[i]=R.Address.fromObject(n.addresses[i])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");o.protocols=[];for(var i=0;i<n.protocols.length;++i)o.protocols[i]=String(n.protocols[i])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");o.metadata=[];for(var i=0;i<n.metadata.length;++i){if(typeof n.metadata[i]!="object")throw TypeError(".Peer.metadata: object expected");o.metadata[i]=R.Metadata.fromObject(n.metadata[i])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?B.base64.decode(n.pubKey,o.pubKey=B.newBuffer(B.base64.length(n.pubKey)),0):n.pubKey.length&&(o.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?B.base64.decode(n.peerRecordEnvelope,o.peerRecordEnvelope=B.newBuffer(B.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(o.peerRecordEnvelope=n.peerRecordEnvelope)),o},r.toObject=function(n,o){o||(o={});var i={};if((o.arrays||o.defaults)&&(i.addresses=[],i.protocols=[],i.metadata=[]),n.addresses&&n.addresses.length){i.addresses=[];for(var s=0;s<n.addresses.length;++s)i.addresses[s]=R.Address.toObject(n.addresses[s],o)}if(n.protocols&&n.protocols.length){i.protocols=[];for(var s=0;s<n.protocols.length;++s)i.protocols[s]=n.protocols[s]}if(n.metadata&&n.metadata.length){i.metadata=[];for(var s=0;s<n.metadata.length;++s)i.metadata[s]=R.Metadata.toObject(n.metadata[s],o)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(i.pubKey=o.bytes===String?B.base64.encode(n.pubKey,0,n.pubKey.length):o.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,o.oneofs&&(i._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(i.peerRecordEnvelope=o.bytes===String?B.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):o.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,o.oneofs&&(i._peerRecordEnvelope="peerRecordEnvelope")),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.default.util.toJSONOptions)},r})(),Gy=R.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}r.prototype.multiaddr=B.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:B.oneOfGetter(e=["isCertified"]),set:B.oneOfSetter(e)}),r.encode=function(n,o){return o||(o=lo.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&o.uint32(16).bool(n.isCertified),o},r.decode=function(n,o){n instanceof At||(n=At.create(n));for(var i=o===void 0?n.len:n.pos+o,s=new R.Address;n.pos<i;){var a=n.uint32();switch(a>>>3){case 1:s.multiaddr=n.bytes();break;case 2:s.isCertified=n.bool();break;default:n.skipType(a&7);break}}return s},r.fromObject=function(n){if(n instanceof R.Address)return n;var o=new R.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?B.base64.decode(n.multiaddr,o.multiaddr=B.newBuffer(B.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),n.isCertified!=null&&(o.isCertified=Boolean(n.isCertified)),o},r.toObject=function(n,o){o||(o={});var i={};return o.defaults&&(o.bytes===String?i.multiaddr="":(i.multiaddr=[],o.bytes!==Array&&(i.multiaddr=B.newBuffer(i.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(i.multiaddr=o.bytes===String?B.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(i.isCertified=n.isCertified,o.oneofs&&(i._isCertified="isCertified")),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.default.util.toJSONOptions)},r})(),Wy=R.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=B.newBuffer([]),r.encode=function(t,n){return n||(n=lo.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof At||(t=At.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new R.Metadata;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:i.key=t.string();break;case 2:i.value=t.bytes();break;default:t.skipType(s&7);break}}return i},r.fromObject=function(t){if(t instanceof R.Metadata)return t;var n=new R.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?B.base64.decode(t.value,n.value=B.newBuffer(B.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(o.key="",n.bytes===String?o.value="":(o.value=[],n.bytes!==Array&&(o.value=B.newBuffer(o.value)))),t.key!=null&&t.hasOwnProperty("key")&&(o.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(o.value=n.bytes===String?B.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ie.default.util.toJSONOptions)},r})();var it=z(Ve(),1),su=it.default.Reader,od=it.default.Writer,T=it.default.util,Kr=it.default.roots.default||(it.default.roots.default={}),au=Kr.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=T.newBuffer([]),r.prototype.payloadType=T.newBuffer([]),r.prototype.payload=T.newBuffer([]),r.prototype.signature=T.newBuffer([]),r.encode=function(t,n){return n||(n=od.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof su||(t=su.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new Kr.Envelope;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:i.publicKey=t.bytes();break;case 2:i.payloadType=t.bytes();break;case 3:i.payload=t.bytes();break;case 5:i.signature=t.bytes();break;default:t.skipType(s&7);break}}return i},r.fromObject=function(t){if(t instanceof Kr.Envelope)return t;var n=new Kr.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?T.base64.decode(t.publicKey,n.publicKey=T.newBuffer(T.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?T.base64.decode(t.payloadType,n.payloadType=T.newBuffer(T.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?T.base64.decode(t.payload,n.payload=T.newBuffer(T.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?T.base64.decode(t.signature,n.signature=T.newBuffer(T.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.publicKey="":(o.publicKey=[],n.bytes!==Array&&(o.publicKey=T.newBuffer(o.publicKey))),n.bytes===String?o.payloadType="":(o.payloadType=[],n.bytes!==Array&&(o.payloadType=T.newBuffer(o.payloadType))),n.bytes===String?o.payload="":(o.payload=[],n.bytes!==Array&&(o.payload=T.newBuffer(o.payload))),n.bytes===String?o.signature="":(o.signature=[],n.bytes!==Array&&(o.signature=T.newBuffer(o.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(o.publicKey=n.bytes===String?T.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(o.payloadType=n.bytes===String?T.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(o.payload=n.bytes===String?T.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(o.signature=n.bytes===String?T.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,it.default.util.toJSONOptions)},r})();var He=z(Ve(),1),Hr=He.default.Reader,uu=He.default.Writer,N=He.default.util,ge=He.default.roots.default||(He.default.roots.default={}),cu=ge.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=N.newBuffer([]),r.prototype.seq=N.Long?N.Long.fromBits(0,0,!0):0,r.prototype.addresses=N.emptyArray,r.encode=function(t,n){if(n||(n=uu.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var o=0;o<t.addresses.length;++o)ge.PeerRecord.AddressInfo.encode(t.addresses[o],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof Hr||(t=Hr.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new ge.PeerRecord;t.pos<o;){var s=t.uint32();switch(s>>>3){case 1:i.peerId=t.bytes();break;case 2:i.seq=t.uint64();break;case 3:i.addresses&&i.addresses.length||(i.addresses=[]),i.addresses.push(ge.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return i},r.fromObject=function(t){if(t instanceof ge.PeerRecord)return t;var n=new ge.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?N.base64.decode(t.peerId,n.peerId=N.newBuffer(N.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(N.Long?(n.seq=N.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new N.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var o=0;o<t.addresses.length;++o){if(typeof t.addresses[o]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[o]=ge.PeerRecord.AddressInfo.fromObject(t.addresses[o])}}return n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addresses=[]),n.defaults)if(n.bytes===String?o.peerId="":(o.peerId=[],n.bytes!==Array&&(o.peerId=N.newBuffer(o.peerId))),N.Long){var i=new N.Long(0,0,!0);o.seq=n.longs===String?i.toString():n.longs===Number?i.toNumber():i}else o.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(o.peerId=n.bytes===String?N.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?o.seq=n.longs===String?String(t.seq):t.seq:o.seq=n.longs===String?N.Long.prototype.toString.call(t.seq):n.longs===Number?new N.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){o.addresses=[];for(var s=0;s<t.addresses.length;++s)o.addresses[s]=ge.PeerRecord.AddressInfo.toObject(t.addresses[s],n)}return o},r.prototype.toJSON=function(){return this.constructor.toObject(this,He.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}return e.prototype.multiaddr=N.newBuffer([]),e.encode=function(n,o){return o||(o=uu.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),o},e.decode=function(n,o){n instanceof Hr||(n=Hr.create(n));for(var i=o===void 0?n.len:n.pos+o,s=new ge.PeerRecord.AddressInfo;n.pos<i;){var a=n.uint32();switch(a>>>3){case 1:s.multiaddr=n.bytes();break;default:n.skipType(a&7);break}}return s},e.fromObject=function(n){if(n instanceof ge.PeerRecord.AddressInfo)return n;var o=new ge.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?N.base64.decode(n.multiaddr,o.multiaddr=N.newBuffer(N.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),o},e.toObject=function(n,o){o||(o={});var i={};return o.defaults&&(o.bytes===String?i.multiaddr="":(i.multiaddr=[],o.bytes!==Array&&(i.multiaddr=N.newBuffer(i.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(i.multiaddr=o.bytes===String?N.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,He.default.util.toJSONOptions)},e}(),r})();var xo=z(Ju(),1);Ao.default.util.Long=void 0;Ao.default.configure();async function kd(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:o,value:i}of r.datastore.query({prefix:"/peers"})){n.push(o);let s=o.toString(),[a,u,f,c,d]=s.split("/");if(u==="peers"&&!!["protos","addrs","metadata","keys"].includes(f)&&!!c)if(t[c]=t[c]||{addresses:[],protocols:[],metadata:[]},f==="protos"){let h=uo.decode(i);t[c].protocols=h.protocols.sort()}else if(f==="addrs"){let h=fo.decode(i);t[c].addresses=h.addrs.sort((b,m)=>new xo.Multiaddr(b.multiaddr).toString().localeCompare(new xo.Multiaddr(m.multiaddr).toString())),h.certifiedRecord&&h.certifiedRecord.raw&&(t[c].peerRecordEnvelope=h.certifiedRecord.raw)}else f==="metadata"?t[c].metadata.push({key:d,value:i}):f==="keys"&&(t[c].pubKey=i)}e(33,"Read peer data from store");for(let o of n)await r.datastore.delete(o);e(66,"Removed existing peer data from store");for(let o of Object.keys(t)){let i=t[o];i.metadata=i.metadata.sort((a,u)=>a.key.localeCompare(u.key));let s=po.encode(i).finish();await r.datastore.put(new A(`/peers/${o}`),s)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function Nd(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:o,value:i}of r.datastore.query({prefix:"/peers"})){n.push(o);let s=o.toString(),[a,u,f]=s.split("/");t[f]=po.decode(i)}e(33,"Read peer data from store");for(let o of n)await r.datastore.delete(o);e(66,"Removed existing peer data from store");for(let[o,i]of Object.entries(t)){if(i.protocols&&i.protocols.length>0&&await r.datastore.put(new A(`/peers/protos/${o}`),uo.encode({protocols:i.protocols}).finish()),i.addresses&&i.addresses.length>0){let s=i.peerRecordEnvelope,a;if(s){let u=au.decode(s),f=cu.decode(u.payload);a={raw:s,seq:f.seq}}await r.datastore.put(new A(`/peers/addrs/${o}`),fo.encode({addrs:i.addresses,certifiedRecord:a}).finish())}if(i.metadata&&i.metadata.length>0)for(let{key:s,value:a}of i.metadata)await r.datastore.put(new A(`/peers/metadata/${o}/${s}`),a);i.pubKey&&await r.datastore.put(new A(`/peers/keys/${o}`),i.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var Gu={version:12,description:"Store each peerstore peer under a single datastore key",migrate:kd,revert:Nd};var st={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},ir=[Object.assign({version:1},st),Object.assign({version:2},st),Object.assign({version:3},st),Object.assign({version:4},st),Object.assign({version:5},st),Object.assign({version:6},st),Object.assign({version:7},st),Ei,Wa,ru,ou,Gu];var Wu=z(br(),1);var So={};$(So,{InvalidValueError:()=>kt,MissingRepoOptionsError:()=>Ae,NonReversibleMigrationError:()=>Tt,NotInitializedRepoError:()=>Ge,RequiredParameterError:()=>_t});var Tt=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Tt.code,this.message=e}};Tt.code="ERR_NON_REVERSIBLE_MIGRATION";var Ge=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Ge.code,this.message=e}};Ge.code="ERR_NOT_INITIALIZED_REPO";var _t=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=_t.code,this.message=e}};_t.code="ERR_REQUIRED_PARAMETER";var kt=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=kt.code,this.message=e}};kt.code="ERR_INVALID_VALUE";var Ae=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Ae.code,this.message=e}};Ae.code="ERR_MISSING_REPO_OPTIONS";var Bo=(0,Wu.default)("ipfs:repo:migrator:repo:init");async function Yu(r){if(!r)throw new Ae("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(er),n=await e.has(Qa);return!t||!n?(Bo(`Version entry present: ${t}`),Bo(`Config entry present: ${n}`),!1):!0}catch(t){return Bo("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}dt();Te();async function en(r){if(!await Yu(r))throw new Ge("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(Oe(await e.get(er)))}finally{await e.close()}}async function sr(r,e){if(!e)throw new Ae("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(er,_e(String(r))),await t.close()}var Xu=z(br(),1),be=(0,Xu.default)("ipfs:repo:migrator");function Zu(r){return r=r||ir,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function Id(r,e,t,n,{ignoreLock:o=!1,onProgress:i,isDryRun:s=!1,migrations:a}){if(a=a||ir,!r)throw new re.RequiredParameterError("Path argument is required!");if(!t)throw new re.RequiredParameterError("repoOptions argument is required!");if(!n)throw new re.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new re.InvalidValueError("Version has to be positive integer!");e=ao(e);let u=await en(e);if(u===n){be("Nothing to migrate.");return}if(u>n)throw new re.InvalidValueError(`Current repo's version (${u}) is higher then toVersion (${n}), you probably wanted to revert it?`);Qu(a,u,n);let f;!s&&!o&&(f=await t.repoLock.lock(r));try{for(let c of a){if(n!==void 0&&c.version>n)break;if(!(c.version<=u)){be(`Migrating version ${c.version}`);try{if(!s){let d=()=>{};i&&(d=(h,b)=>i(c.version,h.toFixed(2),b)),await c.migrate(e,d)}}catch(d){let h=c.version-1;throw be(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${h}`),await sr(h,e),new Error(`During migration to version ${c.version} exception was raised: ${d.stack||d.message||d}`)}be(`Migrating to version ${c.version} finished`)}}s||await sr(n||Zu(a),e),be("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!s&&!o&&f&&await f.close()}}async function $d(r,e,t,n,{ignoreLock:o=!1,onProgress:i,isDryRun:s=!1,migrations:a}){if(a=a||ir,!r)throw new re.RequiredParameterError("Path argument is required!");if(!t)throw new re.RequiredParameterError("repoOptions argument is required!");if(!n)throw new re.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new re.InvalidValueError("Version has to be positive integer!");e=ao(e);let u=await en(e);if(u===n){be("Nothing to revert.");return}if(u<n)throw new re.InvalidValueError(`Current repo's version (${u}) is lower then toVersion (${n}), you probably wanted to migrate it?`);Qu(a,n,u,!0);let f;!s&&!o&&(f=await t.repoLock.lock(r)),be(`Reverting from version ${u} to ${n}`);try{let c=a.slice().reverse();for(let d of c){if(d.version<=n)break;if(!(d.version>u)){be(`Reverting migration version ${d.version}`);try{if(!s){let h=()=>{};i&&(h=(b,m)=>i(d.version,b.toFixed(2),m)),await d.revert(e,h)}}catch(h){let b=d.version;throw be(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${b}`),await sr(b,e),h.message=`During reversion to version ${d.version} exception was raised: ${h.message}`,h}be(`Reverting to version ${d.version} finished`)}}s||await sr(n,e),be(`All migrations successfully reverted to version ${n}!`)}finally{!s&&!o&&f&&await f.close()}}function Qu(r,e,t,n=!1){let o=0;for(let i of r){if(i.version>t)break;if(i.version>e){if(n&&!i.revert)throw new re.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${i.version} is not reversible. Cancelling reversion.`);o++}}if(o!==t-e)throw new re.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var Rd=en,re=So,Pd=ir;return H(Ud);})();
return IpfsRepoMigrations}));
