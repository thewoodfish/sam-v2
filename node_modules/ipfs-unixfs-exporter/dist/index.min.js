"use strict";(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsUnixfsExporter = factory()}(typeof self !== 'undefined' ? self : this, function () {
var IpfsUnixfsExporter=(()=>{var Fs=Object.create;var st=Object.defineProperty;var Os=Object.getOwnPropertyDescriptor;var zs=Object.getOwnPropertyNames;var Is=Object.getPrototypeOf,Us=Object.prototype.hasOwnProperty;var L=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),q=(r,e)=>{for(var t in e)st(r,t,{get:e[t],enumerable:!0})},$r=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zs(e))!Us.call(r,i)&&i!==t&&st(r,i,{get:()=>e[i],enumerable:!(n=Os(e,i))||n.enumerable});return r};var H=(r,e,t)=>(t=r!=null?Fs(Is(r)):{},$r(e||!r||!r.__esModule?st(t,"default",{value:r,enumerable:!0}):t,r)),Ps=r=>$r(st({},"__esModule",{value:!0}),r);var ie=L((zc,Vr)=>{"use strict";function Hr(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function Ms(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return Hr(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),Hr(new i,t)}}Vr.exports=Ms});var di=L((gl,hi)=>{"use strict";hi.exports=uu;function uu(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(c,a){t[n]=function(h){if(o)if(o=!1,h)a(h);else{for(var m=new Array(arguments.length-1),v=0;v<m.length;)m[v++]=arguments[v];c.apply(null,m)}};try{r.apply(e||null,t)}catch(f){o&&(o=!1,a(f))}})}});var gi=L(yi=>{"use strict";var vt=yi;vt.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Pe=new Array(64),mi=new Array(123);for(re=0;re<64;)mi[Pe[re]=re<26?re+65:re<52?re+71:re<62?re-4:re-59|43]=re++;var re;vt.encode=function(e,t,n){for(var i=null,o=[],s=0,c=0,a;t<n;){var f=e[t++];switch(c){case 0:o[s++]=Pe[f>>2],a=(f&3)<<4,c=1;break;case 1:o[s++]=Pe[a|f>>4],a=(f&15)<<2,c=2;break;case 2:o[s++]=Pe[a|f>>6],o[s++]=Pe[f&63],c=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=Pe[a],o[s++]=61,c===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var pi="invalid encoding";vt.decode=function(e,t,n){for(var i=n,o=0,s,c=0;c<e.length;){var a=e.charCodeAt(c++);if(a===61&&o>1)break;if((a=mi[a])===void 0)throw Error(pi);switch(o){case 0:s=a,o=1;break;case 1:t[n++]=s<<2|(a&48)>>4,s=a,o=2;break;case 2:t[n++]=(s&15)<<4|(a&60)>>2,s=a,o=3;break;case 3:t[n++]=(s&3)<<6|a,o=0;break}}if(o===1)throw Error(pi);return n-i};vt.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var wi=L((wl,Di)=>{"use strict";Di.exports=Bt;function Bt(){this._listeners={}}Bt.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Bt.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Bt.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var ki=L((bl,Bi)=>{"use strict";Bi.exports=bi(bi);function bi(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(a,f,h){e[0]=a,f[h]=t[0],f[h+1]=t[1],f[h+2]=t[2],f[h+3]=t[3]}function o(a,f,h){e[0]=a,f[h]=t[3],f[h+1]=t[2],f[h+2]=t[1],f[h+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function s(a,f){return t[0]=a[f],t[1]=a[f+1],t[2]=a[f+2],t[3]=a[f+3],e[0]}function c(a,f){return t[3]=a[f],t[2]=a[f+1],t[1]=a[f+2],t[0]=a[f+3],e[0]}r.readFloatLE=n?s:c,r.readFloatBE=n?c:s}():function(){function e(n,i,o,s){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var a=Math.floor(Math.log(i)/Math.LN2),f=Math.round(i*Math.pow(2,-a)*8388608)&8388607;n((c<<31|a+127<<23|f)>>>0,o,s)}}r.writeFloatLE=e.bind(null,xi),r.writeFloatBE=e.bind(null,Ei);function t(n,i,o){var s=n(i,o),c=(s>>31)*2+1,a=s>>>23&255,f=s&8388607;return a===255?f?NaN:c*(1/0):a===0?c*1401298464324817e-60*f:c*Math.pow(2,a-150)*(f+8388608)}r.readFloatLE=t.bind(null,_i),r.readFloatBE=t.bind(null,vi)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(a,f,h){e[0]=a,f[h]=t[0],f[h+1]=t[1],f[h+2]=t[2],f[h+3]=t[3],f[h+4]=t[4],f[h+5]=t[5],f[h+6]=t[6],f[h+7]=t[7]}function o(a,f,h){e[0]=a,f[h]=t[7],f[h+1]=t[6],f[h+2]=t[5],f[h+3]=t[4],f[h+4]=t[3],f[h+5]=t[2],f[h+6]=t[1],f[h+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function s(a,f){return t[0]=a[f],t[1]=a[f+1],t[2]=a[f+2],t[3]=a[f+3],t[4]=a[f+4],t[5]=a[f+5],t[6]=a[f+6],t[7]=a[f+7],e[0]}function c(a,f){return t[7]=a[f],t[6]=a[f+1],t[5]=a[f+2],t[4]=a[f+3],t[3]=a[f+4],t[2]=a[f+5],t[1]=a[f+6],t[0]=a[f+7],e[0]}r.readDoubleLE=n?s:c,r.readDoubleBE=n?c:s}():function(){function e(n,i,o,s,c,a){var f=s<0?1:0;if(f&&(s=-s),s===0)n(0,c,a+i),n(1/s>0?0:2147483648,c,a+o);else if(isNaN(s))n(0,c,a+i),n(2146959360,c,a+o);else if(s>17976931348623157e292)n(0,c,a+i),n((f<<31|2146435072)>>>0,c,a+o);else{var h;if(s<22250738585072014e-324)h=s/5e-324,n(h>>>0,c,a+i),n((f<<31|h/4294967296)>>>0,c,a+o);else{var m=Math.floor(Math.log(s)/Math.LN2);m===1024&&(m=1023),h=s*Math.pow(2,-m),n(h*4503599627370496>>>0,c,a+i),n((f<<31|m+1023<<20|h*1048576&1048575)>>>0,c,a+o)}}}r.writeDoubleLE=e.bind(null,xi,0,4),r.writeDoubleBE=e.bind(null,Ei,4,0);function t(n,i,o,s,c){var a=n(s,c+i),f=n(s,c+o),h=(f>>31)*2+1,m=f>>>20&2047,v=4294967296*(f&1048575)+a;return m===2047?v?NaN:h*(1/0):m===0?h*5e-324*v:h*Math.pow(2,m-1075)*(v+4503599627370496)}r.readDoubleLE=t.bind(null,_i,0,4),r.readDoubleBE=t.bind(null,vi,4,0)}(),r}function xi(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function Ei(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function _i(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function vi(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var Ai=L((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var Ti=L(Ci=>{"use strict";var fr=Ci;fr.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};fr.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,s=[],c=0,a;t<n;)a=e[t++],a<128?s[c++]=a:a>191&&a<224?s[c++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[c++]=55296+(a>>10),s[c++]=56320+(a&1023)):s[c++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,s.slice(0,c))),o.join("")):String.fromCharCode.apply(String,s.slice(0,c))};fr.write=function(e,t,n){for(var i=n,o,s,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++c,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var Ni=L((El,Si)=>{"use strict";Si.exports=cu;function cu(r,e,t){var n=t||8192,i=n>>>1,o=null,s=n;return function(a){if(a<1||a>i)return r(a);s+a>n&&(o=r(n),s=0);var f=e.call(o,s,s+=a);return s&7&&(s=(s|7)+1),f}}});var Fi=L((_l,Li)=>{"use strict";Li.exports=R;var Qe=De();function R(r,e){this.lo=r>>>0,this.hi=e>>>0}var _e=R.zero=new R(0,0);_e.toNumber=function(){return 0};_e.zzEncode=_e.zzDecode=function(){return this};_e.length=function(){return 1};var fu=R.zeroHash="\0\0\0\0\0\0\0\0";R.fromNumber=function(e){if(e===0)return _e;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new R(n,i)};R.from=function(e){if(typeof e=="number")return R.fromNumber(e);if(Qe.isString(e))if(Qe.Long)e=Qe.Long.fromString(e);else return R.fromNumber(parseInt(e,10));return e.low||e.high?new R(e.low>>>0,e.high>>>0):_e};R.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};R.prototype.toLong=function(e){return Qe.Long?new Qe.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var ge=String.prototype.charCodeAt;R.fromHash=function(e){return e===fu?_e:new R((ge.call(e,0)|ge.call(e,1)<<8|ge.call(e,2)<<16|ge.call(e,3)<<24)>>>0,(ge.call(e,4)|ge.call(e,5)<<8|ge.call(e,6)<<16|ge.call(e,7)<<24)>>>0)};R.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};R.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};R.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};R.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var De=L(lr=>{"use strict";var _=lr;_.asPromise=di();_.base64=gi();_.EventEmitter=wi();_.float=ki();_.inquire=Ai();_.utf8=Ti();_.pool=Ni();_.LongBits=Fi();_.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);_.global=_.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||lr;_.emptyArray=Object.freeze?Object.freeze([]):[];_.emptyObject=Object.freeze?Object.freeze({}):{};_.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};_.isString=function(e){return typeof e=="string"||e instanceof String};_.isObject=function(e){return e&&typeof e=="object"};_.isset=_.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};_.Buffer=function(){try{var r=_.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();_._Buffer_from=null;_._Buffer_allocUnsafe=null;_.newBuffer=function(e){return typeof e=="number"?_.Buffer?_._Buffer_allocUnsafe(e):new _.Array(e):_.Buffer?_._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};_.Array=typeof Uint8Array<"u"?Uint8Array:Array;_.Long=_.global.dcodeIO&&_.global.dcodeIO.Long||_.global.Long||_.inquire("long");_.key2Re=/^true|false|0|1$/;_.key32Re=/^-?(?:0|[1-9][0-9]*)$/;_.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;_.longToHash=function(e){return e?_.LongBits.from(e).toHash():_.LongBits.zeroHash};_.longFromHash=function(e,t){var n=_.LongBits.fromHash(e);return _.Long?_.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function Oi(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}_.merge=Oi;_.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function zi(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Oi(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}_.newError=zi;_.ProtocolError=zi("ProtocolError");_.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};_.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};_.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};_._configure=function(){var r=_.Buffer;if(!r){_._Buffer_from=_._Buffer_allocUnsafe=null;return}_._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},_._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var Dr=L((Bl,Mi)=>{"use strict";Mi.exports=S;var Q=De(),hr,kt=Q.LongBits,Ii=Q.base64,Ui=Q.utf8;function et(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function pr(){}function lu(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function S(){this.len=0,this.head=new et(pr,0,0),this.tail=this.head,this.states=null}var Pi=function(){return Q.Buffer?function(){return(S.create=function(){return new hr})()}:function(){return new S}};S.create=Pi();S.alloc=function(e){return new Q.Array(e)};Q.Array!==Array&&(S.alloc=Q.pool(S.alloc,Q.Array.prototype.subarray));S.prototype._push=function(e,t,n){return this.tail=this.tail.next=new et(e,t,n),this.len+=t,this};function mr(r,e,t){e[t]=r&255}function hu(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function yr(r,e){this.len=r,this.next=void 0,this.val=e}yr.prototype=Object.create(et.prototype);yr.prototype.fn=hu;S.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new yr((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};S.prototype.int32=function(e){return e<0?this._push(gr,10,kt.fromNumber(e)):this.uint32(e)};S.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function gr(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}S.prototype.uint64=function(e){var t=kt.from(e);return this._push(gr,t.length(),t)};S.prototype.int64=S.prototype.uint64;S.prototype.sint64=function(e){var t=kt.from(e).zzEncode();return this._push(gr,t.length(),t)};S.prototype.bool=function(e){return this._push(mr,1,e?1:0)};function dr(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}S.prototype.fixed32=function(e){return this._push(dr,4,e>>>0)};S.prototype.sfixed32=S.prototype.fixed32;S.prototype.fixed64=function(e){var t=kt.from(e);return this._push(dr,4,t.lo)._push(dr,4,t.hi)};S.prototype.sfixed64=S.prototype.fixed64;S.prototype.float=function(e){return this._push(Q.float.writeFloatLE,4,e)};S.prototype.double=function(e){return this._push(Q.float.writeDoubleLE,8,e)};var du=Q.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};S.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(mr,1,0);if(Q.isString(e)){var n=S.alloc(t=Ii.length(e));Ii.decode(e,n,0),e=n}return this.uint32(t)._push(du,t,e)};S.prototype.string=function(e){var t=Ui.length(e);return t?this.uint32(t)._push(Ui.write,t,e):this._push(mr,1,0)};S.prototype.fork=function(){return this.states=new lu(this),this.head=this.tail=new et(pr,0,0),this.len=0,this};S.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new et(pr,0,0),this.len=0),this};S.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};S.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};S._configure=function(r){hr=r,S.create=Pi(),hr._configure()}});var $i=L((kl,ji)=>{"use strict";ji.exports=ae;var Ri=Dr();(ae.prototype=Object.create(Ri.prototype)).constructor=ae;var we=De();function ae(){Ri.call(this)}ae._configure=function(){ae.alloc=we._Buffer_allocUnsafe,ae.writeBytesBuffer=we.Buffer&&we.Buffer.prototype instanceof Uint8Array&&we.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};ae.prototype.bytes=function(e){we.isString(e)&&(e=we._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(ae.writeBytesBuffer,t,e),this};function pu(r,e,t){r.length<40?we.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}ae.prototype.string=function(e){var t=we.Buffer.byteLength(e);return this.uint32(t),t&&this._push(pu,t,e),this};ae._configure()});var xr=L((Al,Wi)=>{"use strict";Wi.exports=P;var ue=De(),br,qi=ue.LongBits,mu=ue.utf8;function ne(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function P(r){this.buf=r,this.pos=0,this.len=r.length}var Hi=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new P(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new P(e);throw Error("illegal buffer")},Gi=function(){return ue.Buffer?function(t){return(P.create=function(i){return ue.Buffer.isBuffer(i)?new br(i):Hi(i)})(t)}:Hi};P.create=Gi();P.prototype._slice=ue.Array.prototype.subarray||ue.Array.prototype.slice;P.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ne(this,10);return e}}();P.prototype.int32=function(){return this.uint32()|0};P.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function wr(){var r=new qi(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ne(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw ne(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}P.prototype.bool=function(){return this.uint32()!==0};function At(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}P.prototype.fixed32=function(){if(this.pos+4>this.len)throw ne(this,4);return At(this.buf,this.pos+=4)};P.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ne(this,4);return At(this.buf,this.pos+=4)|0};function Vi(){if(this.pos+8>this.len)throw ne(this,8);return new qi(At(this.buf,this.pos+=4),At(this.buf,this.pos+=4))}P.prototype.float=function(){if(this.pos+4>this.len)throw ne(this,4);var e=ue.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};P.prototype.double=function(){if(this.pos+8>this.len)throw ne(this,4);var e=ue.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};P.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw ne(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};P.prototype.string=function(){var e=this.bytes();return mu.read(e,0,e.length)};P.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ne(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ne(this);while(this.buf[this.pos++]&128);return this};P.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};P._configure=function(r){br=r,P.create=Gi(),br._configure();var e=ue.Long?"toLong":"toNumber";ue.merge(P.prototype,{int64:function(){return wr.call(this)[e](!1)},uint64:function(){return wr.call(this)[e](!0)},sint64:function(){return wr.call(this).zzDecode()[e](!1)},fixed64:function(){return Vi.call(this)[e](!0)},sfixed64:function(){return Vi.call(this)[e](!1)}})}});var Yi=L((Cl,Ki)=>{"use strict";Ki.exports=ve;var Xi=xr();(ve.prototype=Object.create(Xi.prototype)).constructor=ve;var Ji=De();function ve(r){Xi.call(this,r)}ve._configure=function(){Ji.Buffer&&(ve.prototype._slice=Ji.Buffer.prototype.slice)};ve.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};ve._configure()});var Qi=L((Tl,Zi)=>{"use strict";Zi.exports=tt;var Er=De();(tt.prototype=Object.create(Er.EventEmitter.prototype)).constructor=tt;function tt(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Er.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}tt.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return Er.asPromise(r,s,e,t,n,i);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(a,f){if(a)return s.emit("error",a,e),o(a);if(f===null){s.end(!0);return}if(!(f instanceof n))try{f=n[s.responseDelimited?"decodeDelimited":"decode"](f)}catch(h){return s.emit("error",h,e),o(h)}return s.emit("data",f,e),o(null,f)})}catch(c){s.emit("error",c,e),setTimeout(function(){o(c)},0);return}};tt.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var to=L(eo=>{"use strict";var yu=eo;yu.Service=Qi()});var no=L((Nl,ro)=>{"use strict";ro.exports={}});var so=L(oo=>{"use strict";var G=oo;G.build="minimal";G.Writer=Dr();G.BufferWriter=$i();G.Reader=xr();G.BufferReader=Yi();G.util=De();G.rpc=to();G.roots=no();G.configure=io;function io(){G.util._configure(),G.Writer._configure(G.BufferWriter),G.Reader._configure(G.BufferReader)}io()});var uo=L((Fl,ao)=>{"use strict";ao.exports=so()});var go=L((Pl,yo)=>{"use strict";yo.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,t,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let t=this._internalPositionFor(e,!0);if(t!==-1)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,i=t;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let t=0,n,i;for(;t<this.length&&!n;)i=this.get(t),n=e(i),t++;return n?i:void 0}_internalPositionFor(e,t){let n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*7;if(!((i&1<<o)>0))return-1;let c=this._bitArrays.slice(0,n).reduce(wu,0),a=~(4294967295<<o+1),f=mo(i&a);return c+f-1}_bytePosFor(e,t){let n=Math.floor(e/7),i=n+1;for(;!t&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-t*7}_unsetBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-t*7)}_setInternalPos(e,t,n,i){let o=this._data,s=[t,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=t)o.push(s);else if(o[0][0]<=t)o.unshift(s);else{let c=Math.round(o.length/2);this._data=o.slice(0,c).concat(s).concat(o.slice(c))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(bu),this._changedData=!1}bitField(){let e=[],t=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let a=Math.min(n,t),f=~(255<<a);i|=(o&f)<<8-t,o=o>>>a,n-=a,t-=a,(!t||!n&&!s.length)&&(e.push(i),i=0,t=8)}for(var c=e.length-1;c>0&&e[c]===0;c--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(xu)}};function wu(r,e){return r+mo(e)}function mo(r){let e=r;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function bu(r,e){return r[0]-e[0]}function xu(r){return r[1]}});var So=L((rt,Lt)=>{(function(r,e){"use strict";var t={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(u){if(!Array.isArray(u)&&!ArrayBuffer.isView(u))return!1;for(var l=0;l<u.length;l++)if(!Number.isInteger(u[l])||u[l]<0||u[l]>255)return!1;return!0}function i(u,l){return(u&65535)*l+(((u>>>16)*l&65535)<<16)}function o(u,l){return u<<l|u>>>32-l}function s(u){return u^=u>>>16,u=i(u,2246822507),u^=u>>>13,u=i(u,3266489909),u^=u>>>16,u}function c(u,l){u=[u[0]>>>16,u[0]&65535,u[1]>>>16,u[1]&65535],l=[l[0]>>>16,l[0]&65535,l[1]>>>16,l[1]&65535];var p=[0,0,0,0];return p[3]+=u[3]+l[3],p[2]+=p[3]>>>16,p[3]&=65535,p[2]+=u[2]+l[2],p[1]+=p[2]>>>16,p[2]&=65535,p[1]+=u[1]+l[1],p[0]+=p[1]>>>16,p[1]&=65535,p[0]+=u[0]+l[0],p[0]&=65535,[p[0]<<16|p[1],p[2]<<16|p[3]]}function a(u,l){u=[u[0]>>>16,u[0]&65535,u[1]>>>16,u[1]&65535],l=[l[0]>>>16,l[0]&65535,l[1]>>>16,l[1]&65535];var p=[0,0,0,0];return p[3]+=u[3]*l[3],p[2]+=p[3]>>>16,p[3]&=65535,p[2]+=u[2]*l[3],p[1]+=p[2]>>>16,p[2]&=65535,p[2]+=u[3]*l[2],p[1]+=p[2]>>>16,p[2]&=65535,p[1]+=u[1]*l[3],p[0]+=p[1]>>>16,p[1]&=65535,p[1]+=u[2]*l[2],p[0]+=p[1]>>>16,p[1]&=65535,p[1]+=u[3]*l[1],p[0]+=p[1]>>>16,p[1]&=65535,p[0]+=u[0]*l[3]+u[1]*l[2]+u[2]*l[1]+u[3]*l[0],p[0]&=65535,[p[0]<<16|p[1],p[2]<<16|p[3]]}function f(u,l){return l%=64,l===32?[u[1],u[0]]:l<32?[u[0]<<l|u[1]>>>32-l,u[1]<<l|u[0]>>>32-l]:(l-=32,[u[1]<<l|u[0]>>>32-l,u[0]<<l|u[1]>>>32-l])}function h(u,l){return l%=64,l===0?u:l<32?[u[0]<<l|u[1]>>>32-l,u[1]<<l]:[u[1]<<l-32,0]}function m(u,l){return[u[0]^l[0],u[1]^l[1]]}function v(u){return u=m(u,[0,u[0]>>>1]),u=a(u,[4283543511,3981806797]),u=m(u,[0,u[0]>>>1]),u=a(u,[3301882366,444984403]),u=m(u,[0,u[0]>>>1]),u}t.x86.hash32=function(u,l){if(t.inputValidation&&!n(u))return e;l=l||0;for(var p=u.length%4,O=u.length-p,g=l,D=0,x=3432918353,E=461845907,k=0;k<O;k=k+4)D=u[k]|u[k+1]<<8|u[k+2]<<16|u[k+3]<<24,D=i(D,x),D=o(D,15),D=i(D,E),g^=D,g=o(g,13),g=i(g,5)+3864292196;switch(D=0,p){case 3:D^=u[k+2]<<16;case 2:D^=u[k+1]<<8;case 1:D^=u[k],D=i(D,x),D=o(D,15),D=i(D,E),g^=D}return g^=u.length,g=s(g),g>>>0},t.x86.hash128=function(u,l){if(t.inputValidation&&!n(u))return e;l=l||0;for(var p=u.length%16,O=u.length-p,g=l,D=l,x=l,E=l,k=0,C=0,b=0,z=0,ce=597399067,nt=2869860233,it=951274213,ot=2716044179,T=0;T<O;T=T+16)k=u[T]|u[T+1]<<8|u[T+2]<<16|u[T+3]<<24,C=u[T+4]|u[T+5]<<8|u[T+6]<<16|u[T+7]<<24,b=u[T+8]|u[T+9]<<8|u[T+10]<<16|u[T+11]<<24,z=u[T+12]|u[T+13]<<8|u[T+14]<<16|u[T+15]<<24,k=i(k,ce),k=o(k,15),k=i(k,nt),g^=k,g=o(g,19),g+=D,g=i(g,5)+1444728091,C=i(C,nt),C=o(C,16),C=i(C,it),D^=C,D=o(D,17),D+=x,D=i(D,5)+197830471,b=i(b,it),b=o(b,17),b=i(b,ot),x^=b,x=o(x,15),x+=E,x=i(x,5)+2530024501,z=i(z,ot),z=o(z,18),z=i(z,ce),E^=z,E=o(E,13),E+=g,E=i(E,5)+850148119;switch(k=0,C=0,b=0,z=0,p){case 15:z^=u[T+14]<<16;case 14:z^=u[T+13]<<8;case 13:z^=u[T+12],z=i(z,ot),z=o(z,18),z=i(z,ce),E^=z;case 12:b^=u[T+11]<<24;case 11:b^=u[T+10]<<16;case 10:b^=u[T+9]<<8;case 9:b^=u[T+8],b=i(b,it),b=o(b,17),b=i(b,ot),x^=b;case 8:C^=u[T+7]<<24;case 7:C^=u[T+6]<<16;case 6:C^=u[T+5]<<8;case 5:C^=u[T+4],C=i(C,nt),C=o(C,16),C=i(C,it),D^=C;case 4:k^=u[T+3]<<24;case 3:k^=u[T+2]<<16;case 2:k^=u[T+1]<<8;case 1:k^=u[T],k=i(k,ce),k=o(k,15),k=i(k,nt),g^=k}return g^=u.length,D^=u.length,x^=u.length,E^=u.length,g+=D,g+=x,g+=E,D+=g,x+=g,E+=g,g=s(g),D=s(D),x=s(x),E=s(E),g+=D,g+=x,g+=E,D+=g,x+=g,E+=g,("00000000"+(g>>>0).toString(16)).slice(-8)+("00000000"+(D>>>0).toString(16)).slice(-8)+("00000000"+(x>>>0).toString(16)).slice(-8)+("00000000"+(E>>>0).toString(16)).slice(-8)},t.x64.hash128=function(u,l){if(t.inputValidation&&!n(u))return e;l=l||0;for(var p=u.length%16,O=u.length-p,g=[0,l],D=[0,l],x=[0,0],E=[0,0],k=[2277735313,289559509],C=[1291169091,658871167],b=0;b<O;b=b+16)x=[u[b+4]|u[b+5]<<8|u[b+6]<<16|u[b+7]<<24,u[b]|u[b+1]<<8|u[b+2]<<16|u[b+3]<<24],E=[u[b+12]|u[b+13]<<8|u[b+14]<<16|u[b+15]<<24,u[b+8]|u[b+9]<<8|u[b+10]<<16|u[b+11]<<24],x=a(x,k),x=f(x,31),x=a(x,C),g=m(g,x),g=f(g,27),g=c(g,D),g=c(a(g,[0,5]),[0,1390208809]),E=a(E,C),E=f(E,33),E=a(E,k),D=m(D,E),D=f(D,31),D=c(D,g),D=c(a(D,[0,5]),[0,944331445]);switch(x=[0,0],E=[0,0],p){case 15:E=m(E,h([0,u[b+14]],48));case 14:E=m(E,h([0,u[b+13]],40));case 13:E=m(E,h([0,u[b+12]],32));case 12:E=m(E,h([0,u[b+11]],24));case 11:E=m(E,h([0,u[b+10]],16));case 10:E=m(E,h([0,u[b+9]],8));case 9:E=m(E,[0,u[b+8]]),E=a(E,C),E=f(E,33),E=a(E,k),D=m(D,E);case 8:x=m(x,h([0,u[b+7]],56));case 7:x=m(x,h([0,u[b+6]],48));case 6:x=m(x,h([0,u[b+5]],40));case 5:x=m(x,h([0,u[b+4]],32));case 4:x=m(x,h([0,u[b+3]],24));case 3:x=m(x,h([0,u[b+2]],16));case 2:x=m(x,h([0,u[b+1]],8));case 1:x=m(x,[0,u[b]]),x=a(x,k),x=f(x,31),x=a(x,C),g=m(g,x)}return g=m(g,[0,u.length]),D=m(D,[0,u.length]),g=c(g,D),D=c(D,g),g=v(g),D=v(D),g=c(g,D),D=c(D,g),("00000000"+(g[0]>>>0).toString(16)).slice(-8)+("00000000"+(g[1]>>>0).toString(16)).slice(-8)+("00000000"+(D[0]>>>0).toString(16)).slice(-8)+("00000000"+(D[1]>>>0).toString(16)).slice(-8)},typeof rt<"u"?(typeof Lt<"u"&&Lt.exports&&(rt=Lt.exports=t),rt.murmurHash3=t):typeof define=="function"&&define.amd?define([],function(){return t}):(t._murmurHash3=r.murmurHash3,t.noConflict=function(){return r.murmurHash3=t._murmurHash3,t._murmurHash3=e,t.noConflict=e,t},r.murmurHash3=t)})(rt)});var Lo=L((wh,No)=>{No.exports=So()});var Po=L((Fh,Uo)=>{"use strict";var nc=()=>{let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r};Uo.exports=nc});var Xo=L((Oh,Pr)=>{"use strict";var He=typeof Reflect=="object"?Reflect:null,Mo=He&&typeof He.apply=="function"?He.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},It;He&&typeof He.ownKeys=="function"?It=He.ownKeys:Object.getOwnPropertySymbols?It=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:It=function(e){return Object.getOwnPropertyNames(e)};function ic(r){console&&console.warn&&console.warn(r)}var jo=Number.isNaN||function(e){return e!==e};function I(){I.init.call(this)}Pr.exports=I;Pr.exports.once=uc;I.EventEmitter=I;I.prototype._events=void 0;I.prototype._eventsCount=0;I.prototype._maxListeners=void 0;var Ro=10;function Ut(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(I,"defaultMaxListeners",{enumerable:!0,get:function(){return Ro},set:function(r){if(typeof r!="number"||r<0||jo(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ro=r}});I.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};I.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||jo(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $o(r){return r._maxListeners===void 0?I.defaultMaxListeners:r._maxListeners}I.prototype.getMaxListeners=function(){return $o(this)};I.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var a=o[e];if(a===void 0)return!1;if(typeof a=="function")Mo(a,this,t);else for(var f=a.length,h=Wo(a,f),n=0;n<f;++n)Mo(h[n],this,t);return!0};function Ho(r,e,t,n){var i,o,s;if(Ut(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=$o(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=s.length,ic(c)}return r}I.prototype.addListener=function(e,t){return Ho(this,e,t,!1)};I.prototype.on=I.prototype.addListener;I.prototype.prependListener=function(e,t){return Ho(this,e,t,!0)};function oc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Vo(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=oc.bind(n);return i.listener=t,n.wrapFn=i,i}I.prototype.once=function(e,t){return Ut(t),this.on(e,Vo(this,e,t)),this};I.prototype.prependOnceListener=function(e,t){return Ut(t),this.prependListener(e,Vo(this,e,t)),this};I.prototype.removeListener=function(e,t){var n,i,o,s,c;if(Ut(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){c=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():sc(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};I.prototype.off=I.prototype.removeListener;I.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function qo(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?ac(i):Wo(i,i.length)}I.prototype.listeners=function(e){return qo(this,e,!0)};I.prototype.rawListeners=function(e){return qo(this,e,!1)};I.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Go.call(r,e)};I.prototype.listenerCount=Go;function Go(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}I.prototype.eventNames=function(){return this._eventsCount>0?It(this._events):[]};function Wo(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function sc(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function ac(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function uc(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}Jo(r,e,o,{once:!0}),e!=="error"&&cc(r,i,{once:!0})})}function cc(r,e,t){typeof r.on=="function"&&Jo(r,"error",e,t)}function Jo(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Yo=L((zh,Ko)=>{"use strict";var Pt=Po(),fc=Xo().EventEmitter;async function*lc(r,e={}){let t=e.concurrency||1/0;t<1&&(t=1/0);let n=e.ordered==null?!1:e.ordered,i=new fc,o=[],s=Pt(),c=Pt(),a=!1,f,h=!1;i.on("task-complete",()=>{c.resolve()}),Promise.resolve().then(async()=>{try{for await(let l of r){if(o.length===t&&(s=Pt(),await s.promise),h)break;let p={done:!1};o.push(p),l().then(O=>{p.done=!0,p.ok=!0,p.value=O,i.emit("task-complete")},O=>{p.done=!0,p.err=O,i.emit("task-complete")})}a=!0,i.emit("task-complete")}catch(l){f=l,i.emit("task-complete")}});function m(){return Boolean(n?o[0]&&o[0].done:o.find(l=>l.done))}function*v(){for(;o.length&&o[0].done;){let l=o[0];if(o.shift(),l.ok)yield l.value;else throw h=!0,s.resolve(),l.err;s.resolve()}}function*u(){for(;m();)for(let l=0;l<o.length;l++)if(o[l].done){let p=o[l];if(o.splice(l,1),l--,p.ok)yield p.value;else throw h=!0,s.resolve(),p.err;s.resolve()}}for(;;){if(m()||(c=Pt(),await c.promise),f)throw f;if(n?yield*v():yield*u(),a&&o.length===0)break}}Ko.exports=lc});var Qo=L((Uh,Zo)=>{Zo.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var rs=L((Mh,ts)=>{var es=Qo();ts.exports=class{constructor(e){this.hwm=e||16,this.head=new es(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new es(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var is=L((Rh,ns)=>{var Mr=rs();ns.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new Mr,n,i,o,s=()=>{if(!t.isEmpty()){if(r.writev){let p,O=[];for(;!t.isEmpty();){if(p=t.shift(),p.error)throw p.error;O.push(p.value)}return{done:p.done,value:O}}let l=t.shift();if(l.error)throw l.error;return l}return o?{done:!0}:new Promise((l,p)=>{i=O=>(i=null,O.error?p(O.error):r.writev&&!O.done?l({done:O.done,value:[O.value]}):l(O),n)})},c=l=>i?i(l):(t.push(l),n),a=l=>(t=new Mr,i?i({error:l}):(t.push({error:l}),n)),f=l=>o?n:c({done:!1,value:l}),h=l=>o?n:(o=!0,l?a(l):c({done:!0})),m=()=>(t=new Mr,h(),{done:!0}),v=l=>(h(l),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:s,return:m,throw:v,push:f,end:h},!e)return n;let u=n;return n={[Symbol.asyncIterator](){return this},next(){return u.next()},throw(l){return u.throw(l),e&&(e(l),e=null),{done:!0}},return(){return u.return(),e&&(e(),e=null),{done:!0}},push:f,end(l){return u.end(l),e&&(e(l),e=null),n}},n}});var ss=L((jh,os)=>{"use strict";var hc=is(),dc=async function*(...r){let e=hc();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};os.exports=dc});var ls=L((Vh,fs)=>{"use strict";var yc=async function*(r,e){for await(let t of r)yield e(t)};fs.exports=yc});var Ts=L((xd,Cs)=>{"use strict";var Tc=async r=>{let e;for await(let t of r)e=t;return e};Cs.exports=Tc});var Fc={};q(Fc,{exporter:()=>Ls,recursive:()=>Lc,walkPath:()=>Ns});var jt=H(ie(),1);var Rs=Wr,qr=128,js=127,$s=~js,Hs=Math.pow(2,31);function Wr(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Hs;)e[t++]=r&255|qr,r/=128;for(;r&$s;)e[t++]=r&255|qr,r>>>=7;return e[t]=r|0,Wr.bytes=t-n+1,e}var Vs=$t,qs=128,Gr=127;function $t(r,n){var t=0,n=n||0,i=0,o=n,s,c=r.length;do{if(o>=c)throw $t.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&Gr)<<i:(s&Gr)*Math.pow(2,i),i+=7}while(s>=qs);return $t.bytes=o-n,t}var Gs=Math.pow(2,7),Ws=Math.pow(2,14),Js=Math.pow(2,21),Xs=Math.pow(2,28),Ks=Math.pow(2,35),Ys=Math.pow(2,42),Zs=Math.pow(2,49),Qs=Math.pow(2,56),ea=Math.pow(2,63),ta=function(r){return r<Gs?1:r<Ws?2:r<Js?3:r<Xs?4:r<Ks?5:r<Ys?6:r<Zs?7:r<Qs?8:r<ea?9:10},ra={encode:Rs,decode:Vs,encodingLength:ta},na=ra,Ve=na;var qe=r=>[Ve.decode(r),Ve.decode.bytes],ke=(r,e,t=0)=>(Ve.encode(r,e,t),e),Ae=r=>Ve.encodingLength(r);var Ge={};q(Ge,{coerce:()=>oe,empty:()=>Jr,equals:()=>Ht,fromHex:()=>oa,fromString:()=>Vt,isBinary:()=>sa,toHex:()=>ia,toString:()=>qt});var Jr=new Uint8Array(0),ia=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),oa=r=>{let e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):Jr},Ht=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},oe=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},sa=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),Vt=r=>new TextEncoder().encode(r),qt=r=>new TextDecoder().decode(r);var xe=(r,e)=>{let t=e.byteLength,n=Ae(r),i=n+Ae(t),o=new Uint8Array(i+t);return ke(r,o,0),ke(t,o,n),o.set(e,i),new Ce(r,t,e,o)},ut=r=>{let e=oe(r),[t,n]=qe(e),[i,o]=qe(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Ce(t,i,s,e)},Xr=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&Ht(r.bytes,e.bytes),Ce=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Kt={};q(Kt,{base58btc:()=>se,base58flickr:()=>ha});function aa(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var c=r.length,a=r.charAt(0),f=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function m(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";for(var p=0,O=0,g=0,D=l.length;g!==D&&l[g]===0;)g++,p++;for(var x=(D-g)*h+1>>>0,E=new Uint8Array(x);g!==D;){for(var k=l[g],C=0,b=x-1;(k!==0||C<O)&&b!==-1;b--,C++)k+=256*E[b]>>>0,E[b]=k%c>>>0,k=k/c>>>0;if(k!==0)throw new Error("Non-zero carry");O=C,g++}for(var z=x-O;z!==x&&E[z]===0;)z++;for(var ce=a.repeat(p);z<x;++z)ce+=r.charAt(E[z]);return ce}function v(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;var p=0;if(l[p]!==" "){for(var O=0,g=0;l[p]===a;)O++,p++;for(var D=(l.length-p)*f+1>>>0,x=new Uint8Array(D);l[p];){var E=t[l.charCodeAt(p)];if(E===255)return;for(var k=0,C=D-1;(E!==0||k<g)&&C!==-1;C--,k++)E+=c*x[C]>>>0,x[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");g=k,p++}if(l[p]!==" "){for(var b=D-g;b!==D&&x[b]===0;)b++;for(var z=new Uint8Array(O+(D-b)),ce=O;b!==D;)z[ce++]=x[b++];return z}}}function u(l){var p=v(l);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:v,decode:u}}var ua=aa,ca=ua,Kr=ca;var Gt=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Wt=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Yr(this,e)}},Jt=class{constructor(e){this.decoders=e}or(e){return Yr(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Yr=(r,e)=>new Jt({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Xt=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Gt(e,t,n),this.decoder=new Wt(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Se=({name:r,prefix:e,encode:t,decode:n})=>new Xt(r,e,t,n),de=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=Kr(t,e);return Se({prefix:r,name:e,encode:n,decode:o=>oe(i(o))})},fa=(r,e,t,n)=>{let i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),c=0,a=0,f=0;for(let h=0;h<o;++h){let m=i[r[h]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<t|m,c+=t,c>=8&&(c-=8,s[f++]=255&a>>c)}if(c>=t||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},la=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,c=0;for(let a=0;a<r.length;++a)for(c=c<<8|r[a],s+=8;s>t;)s-=t,o+=e[i&c>>s];if(s&&(o+=e[i&c<<t-s]),n)for(;o.length*t&7;)o+="=";return o},U=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Se({prefix:e,name:r,encode(i){return la(i,n,t)},decode(i){return fa(i,n,t,r)}});var se=de({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ha=de({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Yt={};q(Yt,{base32:()=>Ne,base32hex:()=>ya,base32hexpad:()=>Da,base32hexpadupper:()=>wa,base32hexupper:()=>ga,base32pad:()=>pa,base32padupper:()=>ma,base32upper:()=>da,base32z:()=>ba});var Ne=U({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),da=U({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pa=U({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ma=U({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ya=U({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ga=U({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Da=U({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wa=U({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ba=U({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var F=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ft,byteLength:ft,code:ct,version:ct,multihash:ct,bytes:ct,_baseCache:ft,asCID:ft})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==We)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==va)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return F.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=xe(e,t);return F.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Xr(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return Ea(t,i,e||se.encoder);default:return _a(t,i,e||Ne.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return ka(/^0\.0/,Aa),!!(e&&(e[Qr]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof F)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new F(t,n,i,o||Zr(t,n,i.bytes))}else if(e!=null&&e[Qr]===!0){let{version:t,multihash:n,code:i}=e,o=ut(n);return F.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==We)throw new Error(`Version 0 CID must use dag-pb (code: ${We}) block encoding`);return new F(e,t,n,n.bytes)}case 1:{let i=Zr(e,t,n.bytes);return new F(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return F.create(0,We,e)}static createV1(e,t){return F.create(1,e,t)}static decode(e){let[t,n]=F.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=F.inspectBytes(e),n=t.size-t.multihashSize,i=oe(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new Ce(t.multihashCode,t.digestSize,o,i);return[t.version===0?F.createV0(s):F.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[m,v]=qe(e.subarray(t));return t+=v,m},i=n(),o=We;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,c=n(),a=n(),f=t+a,h=f-s;return{version:i,codec:o,multihashCode:c,digestSize:a,multihashSize:h,size:f}}static parse(e,t){let[n,i]=xa(e,t),o=F.decode(i);return o._baseCache.set(n,e),o}},xa=(r,e)=>{switch(r[0]){case"Q":{let t=e||se;return[se.prefix,t.decode(`${se.prefix}${r}`)]}case se.prefix:{let t=e||se;return[se.prefix,t.decode(r)]}case Ne.prefix:{let t=e||Ne;return[Ne.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},Ea=(r,e,t)=>{let{prefix:n}=t;if(n!==se.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},_a=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},We=112,va=18,Zr=(r,e,t)=>{let n=Ae(r),i=n+Ae(e),o=new Uint8Array(i+t.byteLength);return ke(r,o,0),ke(e,o,n),o.set(t,i),o},Qr=Symbol.for("@ipld/js-cid/CID"),ct={writable:!1,configurable:!1,enumerable:!0},ft={writable:!1,enumerable:!1,configurable:!1},Ba="0.0.0-dev",ka=(r,e)=>{if(r.test(Ba))console.warn(e);else throw new Error(e)},Aa=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var Bs=H(ie(),1);var Ca=new TextDecoder;function Zt(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function lt(r,e){let t;[t,e]=Zt(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function en(r,e){let t;return[t,e]=Zt(r,e),[t&7,t>>3,e]}function Ta(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=en(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=lt(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=lt(r,n),e.Name=Ca.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=Zt(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function tn(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,a;if([c,a,t]=en(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(a===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=lt(r,t),n&&(i=!0)}else if(a===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,t]=lt(r,t),n.push(Ta(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}var Kc=new TextEncoder,Yc=2**32,Zc=2**31;var tf=new TextEncoder;var ht=112;function pe(r){let e=tn(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=F.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}var Sa=["string","number","bigint","symbol"],Na=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function nn(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(Sa.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(La(r))return"Buffer";let t=Fa(r);return t||"Object"}function La(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function Fa(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(Na.includes(e))return e}var d=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var w=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Le=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Oa=new TextDecoder,za=new TextEncoder;function dt(r){return Le&&globalThis.Buffer.isBuffer(r)}function un(r){return r instanceof Uint8Array?dt(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var cn=Le?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):sn(r,e,t):(r,e,t)=>t-e>64?Oa.decode(r.subarray(e,t)):sn(r,e,t),fn=Le?r=>r.length>64?globalThis.Buffer.from(r):on(r):r=>r.length>64?za.encode(r):on(r);var Fe=Le?(r,e,t)=>dt(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),ln=Le?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),un(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},hn=Le?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function dn(r,e){if(dt(r)&&dt(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function on(r,e=1/0){let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function sn(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=t){let c,a,f,h;switch(s){case 1:i<128&&(o=i);break;case 2:c=r[e+1],(c&192)===128&&(h=(i&31)<<6|c&63,h>127&&(o=h));break;case 3:c=r[e+1],a=r[e+2],(c&192)===128&&(a&192)===128&&(h=(i&15)<<12|(c&63)<<6|a&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=r[e+1],a=r[e+2],f=r[e+3],(c&192)===128&&(a&192)===128&&(f&192)===128&&(h=(i&15)<<18|(c&63)<<12|(a&63)<<6|f&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return Ia(n)}var an=4096;function Ia(r){let e=r.length;if(e<=an)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=an));return t}var Ua=256,pt=class{constructor(e=Ua){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=hn(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Fe(n,0,this.cursor)}else t=ln(this.chunks,this.cursor);return e&&this.reset(),t}};var A="CBOR decode error:",Qt="CBOR encode error:",Je=[];Je[23]=1;Je[24]=2;Je[25]=3;Je[26]=5;Je[27]=9;function fe(r,e,t){if(r.length-e<t)throw new Error(`${A} not enough data for type`)}var M=[24,256,65536,4294967296,BigInt("18446744073709551616")];function W(r,e,t){fe(r,e,1);let n=r[e];if(t.strict===!0&&n<M[0])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);return n}function J(r,e,t){fe(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<M[1])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);return n}function X(r,e,t){fe(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<M[2])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);return n}function K(r,e,t){fe(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<M[3])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${A} integers outside of the safe integer range are not supported`)}function pn(r,e,t,n){return new w(d.uint,W(r,e+1,n),2)}function mn(r,e,t,n){return new w(d.uint,J(r,e+1,n),3)}function yn(r,e,t,n){return new w(d.uint,X(r,e+1,n),5)}function gn(r,e,t,n){return new w(d.uint,K(r,e+1,n),9)}function Y(r,e){return j(r,0,e.value)}function j(r,e,t){if(t<M[0]){let n=Number(t);r.push([e|n])}else if(t<M[1]){let n=Number(t);r.push([e|24,n])}else if(t<M[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<M[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<M[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${A} encountered BigInt larger than allowable range`)}}Y.encodedSize=function(e){return j.encodedSize(e.value)};j.encodedSize=function(e){return e<M[0]?1:e<M[1]?2:e<M[2]?3:e<M[3]?5:9};Y.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function Dn(r,e,t,n){return new w(d.negint,-1-W(r,e+1,n),2)}function wn(r,e,t,n){return new w(d.negint,-1-J(r,e+1,n),3)}function bn(r,e,t,n){return new w(d.negint,-1-X(r,e+1,n),5)}var er=BigInt(-1),xn=BigInt(1);function En(r,e,t,n){let i=K(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new w(d.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${A} integers outside of the safe integer range are not supported`);return new w(d.negint,er-BigInt(i),9)}function mt(r,e){let t=e.value,n=typeof t=="bigint"?t*er-xn:t*-1-1;j(r,e.type.majorEncoded,n)}mt.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*er-xn:t*-1-1;return n<M[0]?1:n<M[1]?2:n<M[2]?3:n<M[3]?5:9};mt.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function Xe(r,e,t,n){fe(r,e,t+n);let i=Fe(r,e+t,e+t+n);return new w(d.bytes,i,t+n)}function _n(r,e,t,n){return Xe(r,e,1,t)}function vn(r,e,t,n){return Xe(r,e,2,W(r,e+1,n))}function Bn(r,e,t,n){return Xe(r,e,3,J(r,e+1,n))}function kn(r,e,t,n){return Xe(r,e,5,X(r,e+1,n))}function An(r,e,t,n){let i=K(r,e+1,n);if(typeof i=="bigint")throw new Error(`${A} 64-bit integer bytes lengths not supported`);return Xe(r,e,9,i)}function yt(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===d.string?fn(r.value):r.value),r.encodedBytes}function Oe(r,e){let t=yt(e);j(r,e.type.majorEncoded,t.length),r.push(t)}Oe.encodedSize=function(e){let t=yt(e);return j.encodedSize(t.length)+t.length};Oe.compareTokens=function(e,t){return Ma(yt(e),yt(t))};function Ma(r,e){return r.length<e.length?-1:r.length>e.length?1:dn(r,e)}function Ke(r,e,t,n,i){let o=t+n;fe(r,e,o);let s=new w(d.string,cn(r,e+t,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=Fe(r,e+t,e+o)),s}function Cn(r,e,t,n){return Ke(r,e,1,t,n)}function Tn(r,e,t,n){return Ke(r,e,2,W(r,e+1,n),n)}function Sn(r,e,t,n){return Ke(r,e,3,J(r,e+1,n),n)}function Nn(r,e,t,n){return Ke(r,e,5,X(r,e+1,n),n)}function Ln(r,e,t,n){let i=K(r,e+1,n);if(typeof i=="bigint")throw new Error(`${A} 64-bit integer string lengths not supported`);return Ke(r,e,9,i,n)}var Fn=Oe;function ze(r,e,t,n){return new w(d.array,n,t)}function On(r,e,t,n){return ze(r,e,1,t)}function zn(r,e,t,n){return ze(r,e,2,W(r,e+1,n))}function In(r,e,t,n){return ze(r,e,3,J(r,e+1,n))}function Un(r,e,t,n){return ze(r,e,5,X(r,e+1,n))}function Pn(r,e,t,n){let i=K(r,e+1,n);if(typeof i=="bigint")throw new Error(`${A} 64-bit integer array lengths not supported`);return ze(r,e,9,i)}function Mn(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${A} indefinite length items not allowed`);return ze(r,e,1,1/0)}function gt(r,e){j(r,d.array.majorEncoded,e.value)}gt.compareTokens=Y.compareTokens;gt.encodedSize=function(e){return j.encodedSize(e.value)};function Ie(r,e,t,n){return new w(d.map,n,t)}function Rn(r,e,t,n){return Ie(r,e,1,t)}function jn(r,e,t,n){return Ie(r,e,2,W(r,e+1,n))}function $n(r,e,t,n){return Ie(r,e,3,J(r,e+1,n))}function Hn(r,e,t,n){return Ie(r,e,5,X(r,e+1,n))}function Vn(r,e,t,n){let i=K(r,e+1,n);if(typeof i=="bigint")throw new Error(`${A} 64-bit integer map lengths not supported`);return Ie(r,e,9,i)}function qn(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${A} indefinite length items not allowed`);return Ie(r,e,1,1/0)}function Dt(r,e){j(r,d.map.majorEncoded,e.value)}Dt.compareTokens=Y.compareTokens;Dt.encodedSize=function(e){return j.encodedSize(e.value)};function Gn(r,e,t,n){return new w(d.tag,t,1)}function Wn(r,e,t,n){return new w(d.tag,W(r,e+1,n),2)}function Jn(r,e,t,n){return new w(d.tag,J(r,e+1,n),3)}function Xn(r,e,t,n){return new w(d.tag,X(r,e+1,n),5)}function Kn(r,e,t,n){return new w(d.tag,K(r,e+1,n),9)}function wt(r,e){j(r,d.tag.majorEncoded,e.value)}wt.compareTokens=Y.compareTokens;wt.encodedSize=function(e){return j.encodedSize(e.value)};var qa=20,Ga=21,Wa=22,Ja=23;function Yn(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${A} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new w(d.null,null,1):new w(d.undefined,void 0,1)}function Zn(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${A} indefinite length items not allowed`);return new w(d.break,void 0,1)}function tr(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${A} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${A} Infinity values are not supported`)}return new w(d.float,r,e)}function Qn(r,e,t,n){return tr(rr(r,e+1),3,n)}function ei(r,e,t,n){return tr(nr(r,e+1),5,n)}function ti(r,e,t,n){return tr(oi(r,e+1),9,n)}function bt(r,e,t){let n=e.value;if(n===!1)r.push([d.float.majorEncoded|qa]);else if(n===!0)r.push([d.float.majorEncoded|Ga]);else if(n===null)r.push([d.float.majorEncoded|Wa]);else if(n===void 0)r.push([d.float.majorEncoded|Ja]);else{let i,o=!1;(!t||t.float64!==!0)&&(ni(n),i=rr(ee,1),n===i||Number.isNaN(n)?(ee[0]=249,r.push(ee.slice(0,3)),o=!0):(ii(n),i=nr(ee,1),n===i&&(ee[0]=250,r.push(ee.slice(0,5)),o=!0))),o||(Xa(n),i=oi(ee,1),ee[0]=251,r.push(ee.slice(0,9)))}}bt.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){ni(n);let i=rr(ee,1);if(n===i||Number.isNaN(n))return 3;if(ii(n),i=nr(ee,1),n===i)return 5}return 9};var ri=new ArrayBuffer(9),Z=new DataView(ri,1),ee=new Uint8Array(ri,0);function ni(r){if(r===1/0)Z.setUint16(0,31744,!1);else if(r===-1/0)Z.setUint16(0,64512,!1);else if(Number.isNaN(r))Z.setUint16(0,32256,!1);else{Z.setFloat32(0,r);let e=Z.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)Z.setUint16(0,31744,!1);else if(t===0)Z.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?Z.setUint16(0,0):i<-14?Z.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Z.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function rr(r,e){if(r.length-e<2)throw new Error(`${A} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function ii(r){Z.setFloat32(0,r,!1)}function nr(r,e){if(r.length-e<4)throw new Error(`${A} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function Xa(r){Z.setFloat64(0,r,!1)}function oi(r,e){if(r.length-e<8)throw new Error(`${A} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}bt.compareTokens=Y.compareTokens;function N(r,e,t){throw new Error(`${A} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function xt(r){return()=>{throw new Error(`${A} ${r}`)}}var y=[];for(let r=0;r<=23;r++)y[r]=N;y[24]=pn;y[25]=mn;y[26]=yn;y[27]=gn;y[28]=N;y[29]=N;y[30]=N;y[31]=N;for(let r=32;r<=55;r++)y[r]=N;y[56]=Dn;y[57]=wn;y[58]=bn;y[59]=En;y[60]=N;y[61]=N;y[62]=N;y[63]=N;for(let r=64;r<=87;r++)y[r]=_n;y[88]=vn;y[89]=Bn;y[90]=kn;y[91]=An;y[92]=N;y[93]=N;y[94]=N;y[95]=xt("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)y[r]=Cn;y[120]=Tn;y[121]=Sn;y[122]=Nn;y[123]=Ln;y[124]=N;y[125]=N;y[126]=N;y[127]=xt("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)y[r]=On;y[152]=zn;y[153]=In;y[154]=Un;y[155]=Pn;y[156]=N;y[157]=N;y[158]=N;y[159]=Mn;for(let r=160;r<=183;r++)y[r]=Rn;y[184]=jn;y[185]=$n;y[186]=Hn;y[187]=Vn;y[188]=N;y[189]=N;y[190]=N;y[191]=qn;for(let r=192;r<=215;r++)y[r]=Gn;y[216]=Wn;y[217]=Jn;y[218]=Xn;y[219]=Kn;y[220]=N;y[221]=N;y[222]=N;y[223]=N;for(let r=224;r<=243;r++)y[r]=xt("simple values are not supported");y[244]=N;y[245]=N;y[246]=N;y[247]=Yn;y[248]=xt("simple values are not supported");y[249]=Qn;y[250]=ei;y[251]=ti;y[252]=N;y[253]=N;y[254]=N;y[255]=Zn;var te=[];for(let r=0;r<24;r++)te[r]=new w(d.uint,r,1);for(let r=-1;r>=-24;r--)te[31-r]=new w(d.negint,r,1);te[64]=new w(d.bytes,new Uint8Array(0),1);te[96]=new w(d.string,"",1);te[128]=new w(d.array,0,1);te[160]=new w(d.map,0,1);te[244]=new w(d.false,!1,1);te[245]=new w(d.true,!0,1);te[246]=new w(d.null,null,1);function Ya(){let r=[];return r[d.uint.major]=Y,r[d.negint.major]=mt,r[d.bytes.major]=Oe,r[d.string.major]=Fn,r[d.array.major]=gt,r[d.map.major]=Dt,r[d.tag.major]=wt,r[d.float.major]=bt,r}var il=Ya(),ol=new pt,Ue=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Qt} object contains circular references`);return new Ue(t,e)}},me={null:new w(d.null,null),undefined:new w(d.undefined,void 0),true:new w(d.true,!0),false:new w(d.false,!1),emptyArray:new w(d.array,0),emptyMap:new w(d.map,0)},ye={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new w(d.float,r):r>=0?new w(d.uint,r):new w(d.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new w(d.uint,r):new w(d.negint,r)},Uint8Array(r,e,t,n){return new w(d.bytes,r)},string(r,e,t,n){return new w(d.string,r)},boolean(r,e,t,n){return r?me.true:me.false},null(r,e,t,n){return me.null},undefined(r,e,t,n){return me.undefined},ArrayBuffer(r,e,t,n){return new w(d.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new w(d.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[me.emptyArray,new w(d.break)]:me.emptyArray;n=Ue.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=ir(s,t,n);return t.addBreakTokens?[new w(d.array,r.length),i,new w(d.break)]:[new w(d.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return t.addBreakTokens===!0?[me.emptyMap,new w(d.break)]:me.emptyMap;n=Ue.createCheck(n,r);let c=[],a=0;for(let f of o)c[a++]=[ir(f,t,n),ir(i?r.get(f):r[f],t,n)];return Za(c,t),t.addBreakTokens?[new w(d.map,s),c,new w(d.break)]:[new w(d.map,s),c]}};ye.Map=ye.Object;ye.Buffer=ye.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ye[`${r}Array`]=ye.DataView;function ir(r,e={},t){let n=nn(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||ye[n];if(typeof i=="function"){let s=i(r,n,e,t);if(s!=null)return s}let o=ye[n];if(!o)throw new Error(`${Qt} unsupported type: ${n}`);return o(r,n,e,t)}function Za(r,e){e.mapSorter&&r.sort(e.mapSorter)}var Qa={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},or=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=te[e];if(t===void 0){let n=y[e];if(!n)throw new Error(`${A} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},Ye=Symbol.for("DONE"),Et=Symbol.for("BREAK");function eu(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=Ze(e,t);if(o===Et){if(r.value===1/0)break;throw new Error(`${A} got unexpected break to lengthed array`)}if(o===Ye)throw new Error(`${A} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function tu(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let c=Ze(e,t);if(c===Et){if(r.value===1/0)break;throw new Error(`${A} got unexpected break to lengthed map`)}if(c===Ye)throw new Error(`${A} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${A} non-string keys not supported (got ${typeof c})`);let a=Ze(e,t);if(a===Ye)throw new Error(`${A} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(c,a):i[c]=a}return n?o:i}function Ze(r,e){if(r.done())return Ye;let t=r.next();if(t.type===d.break)return Et;if(t.type.terminal)return t.value;if(t.type===d.array)return eu(t,r,e);if(t.type===d.map)return tu(t,r,e);if(t.type===d.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=Ze(r,e);return e.tags[t.value](n)}throw new Error(`${A} tag not supported (${t.value})`)}throw new Error("unsupported")}function sr(r,e){if(!(r instanceof Uint8Array))throw new Error(`${A} data to decode must be a Uint8Array`);e=Object.assign({},Qa,e);let t=e.tokenizer||new or(r,e),n=Ze(t,e);if(n===Ye)throw new Error(`${A} did not find any content to decode`);if(n===Et)throw new Error(`${A} got unexpected break`);if(!t.done())throw new Error(`${A} too many terminals, data makes no sense`);return n}var iu=42;function ou(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return F.decode(r.subarray(1))}var si={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};si.tags[iu]=ou;var ai=113;var ui=r=>sr(r,si);var _t=85;var cr={};q(cr,{identity:()=>ur});var fi=0,su="identity",li=oe,au=r=>xe(fi,li(r)),ur={code:fi,name:su,encode:li,digest:au};var Rt=H(ie(),1);var Ct=H(ie(),1);var le=H(uo(),1),Me=le.default.Reader,_r=le.default.Writer,B=le.default.util,$=le.default.roots["ipfs-unixfs"]||(le.default.roots["ipfs-unixfs"]={}),co=$.Data=(()=>{function r(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Type=0,r.prototype.Data=B.newBuffer([]),r.prototype.filesize=B.Long?B.Long.fromBits(0,0,!0):0,r.prototype.blocksizes=B.emptyArray,r.prototype.hashType=B.Long?B.Long.fromBits(0,0,!0):0,r.prototype.fanout=B.Long?B.Long.fromBits(0,0,!0):0,r.prototype.mode=0,r.prototype.mtime=null,r.encode=function(t,n){if(n||(n=_r.create()),n.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&n.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&n.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var i=0;i<t.blocksizes.length;++i)n.uint32(32).uint64(t.blocksizes[i]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&n.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&n.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&n.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&$.UnixTime.encode(t.mtime,n.uint32(66).fork()).ldelim(),n},r.decode=function(t,n){t instanceof Me||(t=Me.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new $.Data;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.Type=t.int32();break;case 2:o.Data=t.bytes();break;case 3:o.filesize=t.uint64();break;case 4:if(o.blocksizes&&o.blocksizes.length||(o.blocksizes=[]),(s&7)===2)for(var c=t.uint32()+t.pos;t.pos<c;)o.blocksizes.push(t.uint64());else o.blocksizes.push(t.uint64());break;case 5:o.hashType=t.uint64();break;case 6:o.fanout=t.uint64();break;case 7:o.mode=t.uint32();break;case 8:o.mtime=$.UnixTime.decode(t,t.uint32());break;default:t.skipType(s&7);break}}if(!o.hasOwnProperty("Type"))throw B.ProtocolError("missing required 'Type'",{instance:o});return o},r.fromObject=function(t){if(t instanceof $.Data)return t;var n=new $.Data;switch(t.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?B.base64.decode(t.Data,n.Data=B.newBuffer(B.base64.length(t.Data)),0):t.Data.length&&(n.Data=t.Data)),t.filesize!=null&&(B.Long?(n.filesize=B.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?n.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?n.filesize=t.filesize:typeof t.filesize=="object"&&(n.filesize=new B.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)B.Long?(n.blocksizes[i]=B.Long.fromValue(t.blocksizes[i])).unsigned=!0:typeof t.blocksizes[i]=="string"?n.blocksizes[i]=parseInt(t.blocksizes[i],10):typeof t.blocksizes[i]=="number"?n.blocksizes[i]=t.blocksizes[i]:typeof t.blocksizes[i]=="object"&&(n.blocksizes[i]=new B.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0))}if(t.hashType!=null&&(B.Long?(n.hashType=B.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?n.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?n.hashType=t.hashType:typeof t.hashType=="object"&&(n.hashType=new B.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&(B.Long?(n.fanout=B.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?n.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?n.fanout=t.fanout:typeof t.fanout=="object"&&(n.fanout=new B.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(n.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=$.UnixTime.fromObject(t.mtime)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.blocksizes=[]),n.defaults){if(i.Type=n.enums===String?"Raw":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=B.newBuffer(i.Data))),B.Long){var o=new B.Long(0,0,!0);i.filesize=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.filesize=n.longs===String?"0":0;if(B.Long){var o=new B.Long(0,0,!0);i.hashType=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.hashType=n.longs===String?"0":0;if(B.Long){var o=new B.Long(0,0,!0);i.fanout=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.fanout=n.longs===String?"0":0;i.mode=0,i.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(i.Type=n.enums===String?$.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(i.Data=n.bytes===String?B.base64.encode(t.Data,0,t.Data.length):n.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?i.filesize=n.longs===String?String(t.filesize):t.filesize:i.filesize=n.longs===String?B.Long.prototype.toString.call(t.filesize):n.longs===Number?new B.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){i.blocksizes=[];for(var s=0;s<t.blocksizes.length;++s)typeof t.blocksizes[s]=="number"?i.blocksizes[s]=n.longs===String?String(t.blocksizes[s]):t.blocksizes[s]:i.blocksizes[s]=n.longs===String?B.Long.prototype.toString.call(t.blocksizes[s]):n.longs===Number?new B.LongBits(t.blocksizes[s].low>>>0,t.blocksizes[s].high>>>0).toNumber(!0):t.blocksizes[s]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?i.hashType=n.longs===String?String(t.hashType):t.hashType:i.hashType=n.longs===String?B.Long.prototype.toString.call(t.hashType):n.longs===Number?new B.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?i.fanout=n.longs===String?String(t.fanout):t.fanout:i.fanout=n.longs===String?B.Long.prototype.toString.call(t.fanout):n.longs===Number?new B.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(i.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(i.mtime=$.UnixTime.toObject(t.mtime,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,le.default.util.toJSONOptions)},r.DataType=function(){let e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),r})(),Ol=$.UnixTime=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Seconds=B.Long?B.Long.fromBits(0,0,!1):0,r.prototype.FractionalNanoseconds=0,r.encode=function(t,n){return n||(n=_r.create()),n.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&n.uint32(21).fixed32(t.FractionalNanoseconds),n},r.decode=function(t,n){t instanceof Me||(t=Me.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new $.UnixTime;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.Seconds=t.int64();break;case 2:o.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}if(!o.hasOwnProperty("Seconds"))throw B.ProtocolError("missing required 'Seconds'",{instance:o});return o},r.fromObject=function(t){if(t instanceof $.UnixTime)return t;var n=new $.UnixTime;return t.Seconds!=null&&(B.Long?(n.Seconds=B.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?n.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?n.Seconds=t.Seconds:typeof t.Seconds=="object"&&(n.Seconds=new B.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=t.FractionalNanoseconds>>>0),n},r.toObject=function(t,n){n||(n={});var i={};if(n.defaults){if(B.Long){var o=new B.Long(0,0,!1);i.Seconds=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.Seconds=n.longs===String?"0":0;i.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?i.Seconds=n.longs===String?String(t.Seconds):t.Seconds:i.Seconds=n.longs===String?B.Long.prototype.toString.call(t.Seconds):n.longs===Number?new B.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(i.FractionalNanoseconds=t.FractionalNanoseconds),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,le.default.util.toJSONOptions)},r})(),zl=$.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.MimeType="",r.encode=function(t,n){return n||(n=_r.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&n.uint32(10).string(t.MimeType),n},r.decode=function(t,n){t instanceof Me||(t=Me.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new $.Metadata;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.MimeType=t.string();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof $.Metadata)return t;var n=new $.Metadata;return t.MimeType!=null&&(n.MimeType=String(t.MimeType)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(i.MimeType=t.MimeType),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,le.default.util.toJSONOptions)},r})();var he=co,fo=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Du=["directory","hamt-sharded-directory"],lo=parseInt("0644",8),ho=parseInt("0755",8);function vr(r){if(r!=null)return typeof r=="number"?r&4095:(r=r.toString(),r.substring(0,1)==="0"?parseInt(r,8)&4095:parseInt(r,10)&4095)}function po(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){let t=r.getTime(),n=Math.floor(t/1e3);e={secs:n,nsecs:(t-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,Ct.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var be=class{static unmarshal(e){let t=he.decode(e),n=he.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),i=new be({type:fo[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return i._originalMode=n.mode||0,i}constructor(e={type:"file"}){let{type:t,data:n,blockSizes:i,hashType:o,fanout:s,mtime:c,mode:a}=e;if(t&&!fo.includes(t))throw(0,Ct.default)(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i||[],this._originalMode=0,this.mode=vr(a),c&&(this.mtime=po(c),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?ho:lo;let t=vr(e);t!==void 0&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Du.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(t=>{e+=t}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=he.DataType.Raw;break;case"directory":e=he.DataType.Directory;break;case"file":e=he.DataType.File;break;case"metadata":e=he.DataType.Metadata;break;case"symlink":e=he.DataType.Symlink;break;case"hamt-sharded-directory":e=he.DataType.HAMTShard;break;default:throw(0,Ct.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;(!this.data||!this.data.length)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(vr(this.mode)||0),n===lo&&!this.isDirectory()&&(n=void 0),n===ho&&this.isDirectory()&&(n=void 0));let i;if(this.mtime!=null){let s=po(this.mtime);s&&(i={Seconds:s.secs,FractionalNanoseconds:s.nsecs},i.FractionalNanoseconds===0&&delete i.FractionalNanoseconds)}let o={Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i};return he.encode(o).finish()}};var Bo=H(go(),1);var Br={};q(Br,{identity:()=>Eu});var Eu=Se({prefix:"\0",name:"identity",encode:r=>qt(r),decode:r=>Vt(r)});var kr={};q(kr,{base2:()=>_u});var _u=U({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ar={};q(Ar,{base8:()=>vu});var vu=U({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Cr={};q(Cr,{base10:()=>Bu});var Bu=de({prefix:"9",name:"base10",alphabet:"0123456789"});var Tr={};q(Tr,{base16:()=>ku,base16upper:()=>Au});var ku=U({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Au=U({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Sr={};q(Sr,{base36:()=>Cu,base36upper:()=>Tu});var Cu=de({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Tu=de({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Nr={};q(Nr,{base64:()=>Su,base64pad:()=>Nu,base64url:()=>Lu,base64urlpad:()=>Fu});var Su=U({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nu=U({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lu=U({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fu=U({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Lr={};q(Lr,{base256emoji:()=>Pu});var Do=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ou=Do.reduce((r,e,t)=>(r[t]=e,r),[]),zu=Do.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Iu(r){return r.reduce((e,t)=>(e+=Ou[t],e),"")}function Uu(r){let e=[];for(let t of r){let n=zu[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Pu=Se({prefix:"\u{1F680}",name:"base256emoji",encode:Iu,decode:Uu});var Or={};q(Or,{sha256:()=>Mu,sha512:()=>Ru});var Re=({name:r,code:e,encode:t})=>new Fr(r,e,t),Fr=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?xe(this.code,t):t.then(n=>xe(this.code,n))}else throw Error("Unknown type, must be binary type")}};var bo=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Mu=Re({name:"sha2-256",code:18,encode:bo("SHA-256")}),Ru=Re({name:"sha2-512",code:19,encode:bo("SHA-512")});var Xl=new TextEncoder,Kl=new TextDecoder;var zr={...Br,...kr,...Ar,...Cr,...Tr,...Yt,...Sr,...Kt,...Nr,...Lr},eh={...Or,...cr};function Tt(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Eo(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var xo=Eo("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),Ir=Eo("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Tt(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),$u={utf8:xo,"utf-8":xo,hex:zr.base16,latin1:Ir,ascii:Ir,binary:Ir,...zr},_o=$u;function vo(r,e="utf8"){let t=_o[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var V=class{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new Bo.default,this.key=null}async put(e,t){let n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){let t=await this._findChild(e);if(t!=null)return t.value}async del(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);n!=null&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((t,n)=>n instanceof V?t+n.leafCount():t+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let t of e)t instanceof V?yield*t.eachLeafSeries():yield t}serialize(e,t){let n=[];return t(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof V?i.push(o.serialize(e,t)):i.push(e(o,s))),i),n))}async asyncTransform(e,t){return await ko(this,e,t)}toJSON(){return this.serialize(Vu,qu)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof V)&&n!=null&&n.key===e)return n}async _findPlace(e){let t=this._options.hash(typeof e=="string"?vo(e):e),n=await t.take(this._options.bits),i=this._children.get(n);return i instanceof V?await i._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:i}}async _findNewBucketAndPos(e){let t=await this._findPlace(e);if(t.existingChild!=null&&t.existingChild.key!==e){let n=new V(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,n);let i=await n._findPlace(t.existingChild.hash);return i.bucket._putAt(i,t.existingChild.key,t.existingChild.value),await n._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)==null&&this._popCount++,this._children.set(e,t)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(Hu);if(e!=null&&!(e instanceof V)){let t=e.hash;t.untake(this._options.bits);let n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function Hu(r){return Boolean(r)}function Vu(r,e){return r.key}function qu(r){return r}async function ko(r,e,t){let n=[];for(let i of r._children.compactArray())if(i instanceof V)await ko(i,e,t);else{let o=await e(i);n.push({bitField:r._children.bitField(),children:o})}return await t(n)}var Gu=[255,254,252,248,240,224,192,128],Wu=[1,3,7,15,31,63,127,255],St=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e,n=0;for(;t>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,t),c=Ju(i,o-s,s);n=(n<<s)+c,t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function Ju(r,e,t){let n=Xu(e,t);return(r&n)>>>e}function Xu(r,e){return Gu[r]&Wu[Math.min(e+r-1,7)]}function Ao(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=Tt(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}function Co(r){function e(t){return t instanceof Nt?t:new Nt(t,r)}return e}var Nt=class{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),t),s=i.take(o);n=(n<<o)+s,t-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),t);n.untake(i),t-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?Ao([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new St(t);this._buffers.push(n),this._availableBits+=n.availableBits()}};function To(r){if(r==null||r.hashFn==null)throw new Error("please define an options.hashFn");let e={bits:r.bits??8,hash:Co(r.hashFn)};return new V(e)}var Ur=H(Lo(),1);function Ku(r){let e=new Array(4);for(let t=0;t<4;t++)e[t]=r&255,r=r>>8;return new Uint8Array(e)}var Eh=Re({name:"murmur3-32",code:35,encode:r=>Ku(Ur.default.x86.hash32(r))}),Fo=Re({name:"murmur3-128",code:34,encode:r=>Ge.fromHex(Ur.default.x64.hash128(r))});var Yu=async function(r){return(await Fo.encode(r)).slice(0,8).reverse()},Zu=(r,e,t)=>Promise.all(r.map(n=>{if(n.Name==null)throw new Error("Unexpected Link without a Name");if(n.Name.length===2){let i=parseInt(n.Name,16);return e._putObjectAt(i,new V({hash:t._options.hash,bits:t._options.bits},e,i))}return t.put(n.Name.substring(2),!0)})),Oo=r=>r.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Qu=r=>{let e=r.bucket,t=[];for(;e._parent;)t.push(e),e=e._parent;return t.push(e),t.reverse()},zo=async(r,e,t,n,i)=>{if(!n){let h=To({hashFn:Yu});n={rootBucket:h,hamtDepth:1,lastBucket:h}}await Zu(r.Links,n.lastBucket,n.rootBucket);let o=await n.rootBucket._findNewBucketAndPos(e),s=Oo(o.pos),c=Qu(o);c.length>n.hamtDepth&&(n.lastBucket=c[n.hamtDepth],s=Oo(n.lastBucket._posAtParent));let a=r.Links.find(h=>{if(h.Name==null)return!1;let m=h.Name.substring(0,2),v=h.Name.substring(2);return!(m!==s||v&&v!==e)});if(!a)return null;if(a.Name!=null&&a.Name.substring(2)===e)return a.Hash;n.hamtDepth++;let f=await t.get(a.Hash,i);return r=pe(f),zo(r,e,t,n,i)},Io=zo;function ec(r,e,t,n){let i=r.length,o=e+i;return t>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(r=r.subarray(0,n-e)),t>=e&&t<o&&(r=r.subarray(t-e)),r)}var Be=ec;var Ft=H(ie(),1),tc=(r,e,t)=>{if(e||(e=0),e<0)throw(0,Ft.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>r)throw(0,Ft.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!t&&t!==0&&(t=r-e),t<0)throw(0,Ft.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+t>r&&(t=r-e),{offset:e,length:t}},je=tc;var Mt=H(ie(),1);var Ot=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},$e=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Ot(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Ot(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function zt(r={}){return rc(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function rc(r,e){e=e??{};let t=e.onEnd,n=new $e,i,o,s,c=async()=>n.isEmpty()?s?{done:!0}:await new Promise((p,O)=>{o=g=>{o=null,n.push(g);try{p(r(n))}catch(D){O(D)}return i}}):r(n),a=p=>o!=null?o(p):(n.push(p),i),f=p=>(n=new $e,o!=null?o({error:p}):(n.push({error:p}),i)),h=p=>{if(s)return i;if(e?.objectMode!==!0&&p?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return a({done:!1,value:p})},m=p=>s?i:(s=!0,p!=null?f(p):a({done:!0})),v=()=>(n=new $e,m(),{done:!0}),u=p=>(m(p),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:v,throw:u,push:h,end:m,get readableLength(){return n.size}},t==null)return i;let l=i;return i={[Symbol.asyncIterator](){return this},next(){return l.next()},throw(p){return l.throw(p),t!=null&&(t(p),t=void 0),{done:!0}},return(){return l.return(),t!=null&&(t(),t=void 0),{done:!0}},push:h,end(p){return l.end(p),t!=null&&(t(p),t=void 0),i},get readableLength(){return l.readableLength}},i}var hs=H(Yo(),1);var as=H(ss(),1),pc=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},us=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),Rr=r=>r!=null&&typeof r.sink=="function"&&us(r.source),mc=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=zt({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),(0,as.default)(n,async function*(){yield*r.source,n.end()}())}return r.source};function cs(r,...e){if(Rr(r)){let n=r;r=()=>n.source}else if(us(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&Rr(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)Rr(t[n])&&(t[n]=mc(t[n]));return pc(...t)}var ds=H(ls(),1);async function ps(r,e,t,n,i,o,s){if(e instanceof Uint8Array){t.push(Be(e,n,i,o));return}if(e.Data==null)throw(0,Mt.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let c;try{c=be.unmarshal(e.Data)}catch(f){throw(0,Mt.default)(f,"ERR_NOT_UNIXFS")}if(c.data!=null){let f=c.data,h=Be(f,n,i,o);t.push(h),n+=h.byteLength}let a=[];for(let f=0;f<e.Links.length;f++){let h=e.Links[f],m=n,v=m+c.blockSizes[f];if((i>=m&&i<v||o>=m&&o<=v||i<m&&o>v)&&a.push({link:h,blockStart:n}),n=v,n>o)break}await cs(a,f=>(0,ds.default)(f,h=>async()=>{let m=await r.get(h.link.Hash,{signal:s.signal});return{...h,block:m}}),f=>(0,hs.default)(f,{ordered:!0}),async f=>{for await(let{link:h,block:m,blockStart:v}of f){let u;switch(h.Hash.code){case ht:u=await pe(m);break;case _t:u=m;break;default:throw(0,Mt.default)(new Error(`Unsupported codec: ${h.Hash.code}`),"ERR_NOT_UNIXFS")}await ps(r,u,t,v,i,o,s)}})}var gc=(r,e,t,n,i,o,s)=>{async function*c(a={}){let f=t.fileSize();if(f===void 0)throw new Error("File was a directory");let{offset:h,length:m}=je(f,a.offset,a.length);if(m===0)return;let v=zt({objectMode:!0});ps(s,e,v,0,h,h+m,a).catch(l=>{v.end(l)});let u=0;for await(let l of v)l!=null&&(u+=l.byteLength,u===m&&v.end(),yield l)}return c},jr=gc;var Dc=(r,e,t,n,i,o,s)=>{async function*c(a={}){let f=a.offset||0,h=a.length||e.Links.length,m=e.Links.slice(f,h);for(let v of m){let u=await i(v.Hash,v.Name||"",`${n}/${v.Name||""}`,[],o+1,s,a);u.entry&&(yield u.entry)}}return c},ms=Dc;var wc=(r,e,t,n,i,o,s)=>{function c(a={}){return ys(e,n,i,o,s,a)}return c};async function*ys(r,e,t,n,i,o){let s=r.Links;for(let c of s){let a=c.Name!=null?c.Name.substring(2):null;if(a)yield(await t(c.Hash,a,`${e}/${a}`,[],n+1,i,o)).entry;else{let f=await i.get(c.Hash);r=pe(f);for await(let h of ys(r,e,t,n,i,o))yield h}}}var gs=wc;var bc=(r,e)=>{let t=r.Links.find(n=>n.Name===e);return t&&t.Hash},xc={raw:jr,file:jr,directory:ms,"hamt-sharded-directory":gs,metadata:(r,e,t,n,i,o,s)=>()=>[],symlink:(r,e,t,n,i,o,s)=>()=>[]},Ec=async(r,e,t,n,i,o,s,c)=>{let a=await s.get(r,c),f=pe(a),h,m;if(e||(e=r.toString()),f.Data==null)throw(0,Rt.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{h=be.unmarshal(f.Data)}catch(v){throw(0,Rt.default)(v,"ERR_NOT_UNIXFS")}if(t||(t=e),n.length){let v;if(h&&h.type==="hamt-sharded-directory"?v=await Io(f,n[0],s):v=bc(f,n[0]),!v)throw(0,Rt.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let u=n.shift(),l=`${t}/${u}`;m={cid:v,toResolve:n,name:u||"",path:l}}return{entry:{type:h.isDirectory()?"directory":"file",name:e,path:t,cid:r,content:xc[h.type](r,f,h,t,i,o,s),unixfs:h,depth:o,node:f,size:h.fileSize()},next:m}},Ds=Ec;var ws=H(ie(),1);var _c=r=>{async function*e(t={}){let{offset:n,length:i}=je(r.length,t.offset,t.length);yield Be(r,0,n,n+i)}return e},vc=async(r,e,t,n,i,o,s,c)=>{if(n.length)throw(0,ws.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let a=await s.get(r,c);return{entry:{type:"raw",name:e,path:t,cid:r,content:_c(a),depth:o,size:a.length,node:a}}},bs=vc;var xs=H(ie(),1);var Bc=async(r,e,t,n,i,o,s,c)=>{let a=await s.get(r),f=ui(a),h=f,m=t;for(;n.length;){let v=n[0];if(v in h){n.shift(),m=`${m}/${v}`;let u=F.asCID(h[v]);if(u)return{entry:{type:"object",name:e,path:t,cid:r,node:a,depth:o,size:a.length,content:async function*(){yield f}},next:{cid:u,name:v,path:m,toResolve:n}};h=h[v]}else throw(0,xs.default)(new Error(`No property named ${v} found in cbor node ${r}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:t,cid:r,node:a,depth:o,size:a.length,content:async function*(){yield f}}}},Es=Bc;var _s=H(ie(),1);var kc=r=>{async function*e(t={}){let{offset:n,length:i}=je(r.length,t.offset,t.length);yield Be(r,0,n,n+i)}return e},Ac=async(r,e,t,n,i,o,s,c)=>{if(n.length)throw(0,_s.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let a=await ut(r.multihash.bytes);return{entry:{type:"identity",name:e,path:t,cid:r,content:kc(a.digest),depth:o,size:a.digest.length,node:a.digest}}},vs=Ac;var Cc={[ht]:Ds,[_t]:bs,[ai]:Es,[ur.code]:vs};function ks(r,e,t,n,i,o,s){let c=Cc[r.code];if(!c)throw(0,Bs.default)(new Error(`No resolver for code ${r.code}`),"ERR_NO_RESOLVER");return c(r,e,t,n,ks,i,o,s)}var As=ks;var Ss=H(Ts(),1),Sc=(r="")=>(r.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),Nc=r=>{if(r instanceof Uint8Array)return{cid:F.decode(r),toResolve:[]};let e=F.asCID(r);if(e)return{cid:e,toResolve:[]};if(typeof r=="string"){r.indexOf("/ipfs/")===0&&(r=r.substring(6));let t=Sc(r);return{cid:F.parse(t[0]),toResolve:t.slice(1)}}throw(0,jt.default)(new Error(`Unknown path type ${r}`),"ERR_BAD_PATH")};async function*Ns(r,e,t={}){let{cid:n,toResolve:i}=Nc(r),o=n.toString(),s=o,c=i.length;for(;;){let a=await As(n,o,s,i,c,e,t);if(!a.entry&&!a.next)throw(0,jt.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");if(a.entry&&(yield a.entry),!a.next)return;i=a.next.toResolve,n=a.next.cid,o=a.next.name,s=a.next.path}}async function Ls(r,e,t={}){let n=await(0,Ss.default)(Ns(r,e,t));if(!n)throw(0,jt.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");return n}async function*Lc(r,e,t={}){let n=await Ls(r,e,t);if(!n)return;if(yield n,n.type==="directory")for await(let o of i(n,t))yield o;async function*i(o,s){for await(let c of o.content(s))yield c,!(c instanceof Uint8Array)&&c.type==="directory"&&(yield*i(c,s))}}return Ps(Fc);})();
return IpfsUnixfsExporter}));
